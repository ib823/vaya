<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAYA â€” Master Specification Document (BULLETPROOF)</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-void: #030304;
            --bg-primary: #0a0a0c;
            --bg-secondary: #101014;
            --bg-card: #14141a;
            --bg-elevated: #1a1a24;
            --border-subtle: #1e1e2a;
            --border-accent: #2a2a3a;
            --text-primary: #f0f0f4;
            --text-secondary: #8888a0;
            --text-muted: #5a5a70;
            --accent: #00d4aa;
            --accent-dim: rgba(0, 212, 170, 0.15);
            --danger: #ff4757;
            --danger-dim: rgba(255, 71, 87, 0.15);
            --warning: #ffa502;
            --warning-dim: rgba(255, 165, 2, 0.15);
            --success: #2ed573;
            --info: #3498db;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'IBM Plex Sans', -apple-system, sans-serif;
            background: var(--bg-void);
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 15px;
        }

        .container { max-width: 1100px; margin: 0 auto; padding: 0 32px; }

        /* Header */
        .header {
            padding: 60px 0;
            border-bottom: 1px solid var(--danger);
            background: linear-gradient(135deg, var(--danger-dim), transparent);
        }

        .header-warning {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--danger-dim);
            border: 1px solid var(--danger);
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--danger);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .header-meta {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* TOC */
        .toc {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 32px;
            margin: 40px 0;
        }

        .toc h2 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .toc-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        @media (max-width: 900px) {
            .toc-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            .toc-grid { grid-template-columns: 1fr; }
        }

        .toc a {
            display: block;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .toc a:hover {
            background: var(--bg-elevated);
            border-color: var(--accent);
            color: var(--accent);
        }

        .toc a.critical {
            border-color: var(--danger);
            background: var(--danger-dim);
        }

        /* Section */
        section {
            padding: 60px 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .section-header {
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-subtle);
        }

        .section-id {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 8px;
        }

        h2 {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        h3 {
            font-size: 1.2rem;
            font-weight: 600;
            margin: 32px 0 16px;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1rem;
            font-weight: 600;
            margin: 24px 0 12px;
            color: var(--text-secondary);
        }

        .section-desc {
            color: var(--text-secondary);
            max-width: 700px;
        }

        /* Spec Block */
        .spec-block {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            margin: 24px 0;
            overflow: hidden;
        }

        .spec-block-header {
            padding: 16px 20px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .spec-block-title {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .spec-block-id {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            background: var(--bg-elevated);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .spec-block-body {
            padding: 20px;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        th {
            background: var(--bg-secondary);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }

        td {
            color: var(--text-secondary);
        }

        tr:last-child td { border-bottom: none; }

        td code {
            background: var(--bg-elevated);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent);
        }

        /* Code */
        pre {
            background: #0d0d10;
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            line-height: 1.6;
            margin: 16px 0;
        }

        code {
            font-family: 'IBM Plex Mono', monospace;
        }

        .code-comment { color: var(--text-muted); }
        .code-key { color: #c792ea; }
        .code-value { color: var(--accent); }
        .code-string { color: #f0c674; }
        .code-type { color: #82aaff; }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tag-required { background: var(--danger-dim); color: var(--danger); border: 1px solid var(--danger); }
        .tag-critical { background: var(--danger-dim); color: var(--danger); border: 1px solid var(--danger); }
        .tag-important { background: var(--warning-dim); color: var(--warning); border: 1px solid var(--warning); }
        .tag-optional { background: var(--accent-dim); color: var(--accent); border: 1px solid var(--accent); }

        /* Alert */
        .alert {
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .alert-danger {
            background: var(--danger-dim);
            border: 1px solid var(--danger);
        }

        .alert-danger h5 { color: var(--danger); }

        .alert-warning {
            background: var(--warning-dim);
            border: 1px solid var(--warning);
        }

        .alert-warning h5 { color: var(--warning); }

        .alert h5 {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .alert p, .alert ul {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .alert ul {
            margin-top: 8px;
            padding-left: 20px;
        }

        /* Grid */
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; }

        @media (max-width: 900px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
        }

        /* Value Card */
        .value-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 16px;
        }

        .value-card-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 4px;
        }

        .value-card-value {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--accent);
        }

        /* Checklist */
        .checklist {
            list-style: none;
        }

        .checklist li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .checklist li:last-child { border-bottom: none; }

        .checklist-icon {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .checklist-icon.required {
            background: var(--danger-dim);
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .checklist-icon.done {
            background: var(--accent-dim);
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .checklist-content h5 {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .checklist-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Schema */
        .schema {
            background: #0a0a0e;
            border: 1px solid var(--border-accent);
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .schema-title {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .schema-field {
            display: flex;
            padding: 8px 0;
            border-bottom: 1px dashed var(--border-subtle);
        }

        .schema-field:last-child { border-bottom: none; }

        .schema-field-name {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.85rem;
            color: var(--text-primary);
            width: 200px;
            flex-shrink: 0;
        }

        .schema-field-type {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            color: #82aaff;
            width: 120px;
            flex-shrink: 0;
        }

        .schema-field-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .schema-field-required {
            color: var(--danger);
            font-size: 0.7rem;
            margin-left: 8px;
        }

        /* Footer */
        footer {
            padding: 60px 0;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Print */
        @media print {
            body { background: white; color: black; }
            .header { background: none; border-color: black; }
            .spec-block, .schema, .toc { border-color: #ccc; }
            pre { background: #f5f5f5; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-warning">âš ï¸ CONFIDENTIAL â€” ZERO TRUST DOCUMENT</div>
            <h1>VAYA Master Specification</h1>
            <p class="header-meta">
                Complete technical, business, and operational specification. 
                No gaps. No ambiguity. No room for misinterpretation.<br>
                <strong>Document Version:</strong> 1.0.0 | <strong>Last Updated:</strong> January 8, 2026 | <strong>Classification:</strong> Internal Only
            </p>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- TOC -->
            <nav class="toc">
                <h2>ðŸ“‹ Table of Contents â€” All Sections MANDATORY</h2>
                <div class="toc-grid">
                    <a href="#glossary" class="critical">1. Glossary & Terminology</a>
                    <a href="#design-tokens">2. Design Tokens (Exact Values)</a>
                    <a href="#database">3. Database Schema</a>
                    <a href="#api">4. API Specification</a>
                    <a href="#ml-models">5. ML Model Architecture</a>
                    <a href="#business-rules">6. Business Rules Engine</a>
                    <a href="#user-journeys">7. User Journey Maps</a>
                    <a href="#error-handling">8. Error Handling</a>
                    <a href="#edge-cases">9. Edge Cases</a>
                    <a href="#security">10. Security Architecture</a>
                    <a href="#performance">11. Performance Requirements</a>
                    <a href="#testing">12. Testing Strategy</a>
                    <a href="#accessibility">13. Accessibility (WCAG)</a>
                    <a href="#i18n">14. Internationalization</a>
                    <a href="#analytics">15. Analytics & Tracking</a>
                    <a href="#notifications">16. Notification System</a>
                    <a href="#admin">17. Admin Panel</a>
                    <a href="#legal">18. Legal & Compliance</a>
                    <a href="#infrastructure">19. Infrastructure</a>
                    <a href="#disaster-recovery">20. Disaster Recovery</a>
                    <a href="#kpis">21. Success Metrics & KPIs</a>
                    <a href="#dependencies">22. Third-Party Dependencies</a>
                    <a href="#rollout">23. Rollout Strategy</a>
                    <a href="#handoff">24. Handoff Checklist</a>
                </div>
            </nav>

            <!-- Section 1: Glossary -->
            <section id="glossary">
                <div class="section-header">
                    <div class="section-id">Section 01</div>
                    <h2>Glossary & Terminology</h2>
                    <p class="section-desc">
                        Shared vocabulary. Every term defined. No interpretation required. 
                        If a word is used in ANY document, it MUST be defined here.
                    </p>
                </div>

                <div class="alert alert-danger">
                    <h5>âš ï¸ CRITICAL: Terminology Drift = Project Failure</h5>
                    <p>If team members use different definitions for the same term, features will be built wrong. 
                    ALL communication must use ONLY these definitions.</p>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Core Platform Terms</span>
                        <span class="spec-block-id">GLOSS-CORE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Definition</th>
                                    <th>NOT This</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>Oracle Engine</code></td>
                                    <td>The ML-powered prediction system that forecasts flight prices, demand, and optimal booking times. Runs continuously on backend.</td>
                                    <td>Not a database. Not a chatbot. Not user-facing directly.</td>
                                </tr>
                                <tr>
                                    <td><code>Prediction</code></td>
                                    <td>A specific forecast output from Oracle Engine containing: predicted_price, confidence_score, optimal_action, reasoning, time_horizon.</td>
                                    <td>Not a guess. Not a suggestion. Always includes confidence score.</td>
                                </tr>
                                <tr>
                                    <td><code>Demand Pool</code></td>
                                    <td>A collection of users who have declared intent for the same route/date range. Minimum 100 users to activate. Airlines bid once activated.</td>
                                    <td>Not a waiting list. Not a wishlist. Has defined activation threshold.</td>
                                </tr>
                                <tr>
                                    <td><code>Intent Declaration</code></td>
                                    <td>User action of specifying desired route + date range + max price. Replaces "search" conceptually.</td>
                                    <td>Not a search query. Not a booking. No commitment until confirmed.</td>
                                </tr>
                                <tr>
                                    <td><code>Directive</code></td>
                                    <td>The actionable recommendation from Oracle: WAIT, BOOK_NOW, or BOOK_URGENT. Always singular, never multiple options.</td>
                                    <td>Not a suggestion. Not "you might want to." Definitive instruction.</td>
                                </tr>
                                <tr>
                                    <td><code>Confidence Score</code></td>
                                    <td>Percentage (0-100) indicating Oracle's certainty about a prediction. Calculated from historical accuracy on similar patterns.</td>
                                    <td>Not arbitrary. Must be derived from actual backtested accuracy.</td>
                                </tr>
                                <tr>
                                    <td><code>Synthetic Route</code></td>
                                    <td>A multi-segment journey combining different transport modes (flight + train + ferry) that doesn't exist as a single bookable product anywhere.</td>
                                    <td>Not a codeshare. Not an interline. Assembled by VAYA from components.</td>
                                </tr>
                                <tr>
                                    <td><code>ATA (Autonomous Travel Agent)</code></td>
                                    <td>Premium feature ($29/mo) where VAYA books flights automatically based on user-defined preferences without requiring confirmation.</td>
                                    <td>Not a chatbot. Not a recommendation engine. Actually executes bookings.</td>
                                </tr>
                                <tr>
                                    <td><code>Dark Pool</code></td>
                                    <td>Internal matching system where user intent is matched against VAYA's inventory/predictions without querying external APIs (hiding demand signals).</td>
                                    <td>Not a database. Not storage. Active matching engine.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">User States & Statuses</span>
                        <span class="spec-block-id">GLOSS-USER</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Term</th>
                                    <th>Definition</th>
                                    <th>Transitions To</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>Anonymous</code></td>
                                    <td>User with no account. Can view predictions. Cannot save, join pools, or book.</td>
                                    <td>Registered (on signup)</td>
                                </tr>
                                <tr>
                                    <td><code>Registered</code></td>
                                    <td>User with verified email. Can save routes, receive alerts, join demand pools.</td>
                                    <td>Premium (on subscription), Churned (on inactivity)</td>
                                </tr>
                                <tr>
                                    <td><code>Premium</code></td>
                                    <td>Paying subscriber ($29/mo). Has ATA access, priority pool placement, no ads.</td>
                                    <td>Registered (on cancellation)</td>
                                </tr>
                                <tr>
                                    <td><code>Churned</code></td>
                                    <td>Previously active user with 90+ days no login. Triggered win-back campaigns.</td>
                                    <td>Registered (on re-engagement)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Booking States</span>
                        <span class="spec-block-id">GLOSS-BOOKING</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>State</th>
                                    <th>Definition</th>
                                    <th>Next Valid States</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>PENDING</code></td>
                                    <td>Booking initiated, payment not yet processed</td>
                                    <td>CONFIRMED, FAILED, EXPIRED</td>
                                </tr>
                                <tr>
                                    <td><code>CONFIRMED</code></td>
                                    <td>Payment successful, PNR issued by airline</td>
                                    <td>COMPLETED, CANCELLED, MODIFIED</td>
                                </tr>
                                <tr>
                                    <td><code>COMPLETED</code></td>
                                    <td>Travel date passed, flight taken</td>
                                    <td>Terminal state (none)</td>
                                </tr>
                                <tr>
                                    <td><code>CANCELLED</code></td>
                                    <td>Booking cancelled by user or system</td>
                                    <td>REFUNDED, CREDITED</td>
                                </tr>
                                <tr>
                                    <td><code>FAILED</code></td>
                                    <td>Payment failed or airline rejected booking</td>
                                    <td>PENDING (retry), Terminal</td>
                                </tr>
                                <tr>
                                    <td><code>MODIFIED</code></td>
                                    <td>Date/route changed after confirmation</td>
                                    <td>CONFIRMED, CANCELLED</td>
                                </tr>
                                <tr>
                                    <td><code>EXPIRED</code></td>
                                    <td>Hold expired before payment (15 min limit)</td>
                                    <td>Terminal state (none)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 2: Design Tokens -->
            <section id="design-tokens">
                <div class="section-header">
                    <div class="section-id">Section 02</div>
                    <h2>Design Tokens â€” Exact Values</h2>
                    <p class="section-desc">
                        No approximations. No "about 16px". Every value specified exactly. 
                        Designers and developers MUST use these exact values.
                    </p>
                </div>

                <h3>2.1 Color Palette</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Core Colors</span>
                        <span class="spec-block-id">TOKEN-COLOR-CORE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token Name</th>
                                    <th>Hex Value</th>
                                    <th>RGB</th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--color-bg-void</code></td>
                                    <td>#050507</td>
                                    <td>rgb(5, 5, 7)</td>
                                    <td>Page background (darkest)</td>
                                </tr>
                                <tr>
                                    <td><code>--color-bg-primary</code></td>
                                    <td>#0a0a0d</td>
                                    <td>rgb(10, 10, 13)</td>
                                    <td>Main content background</td>
                                </tr>
                                <tr>
                                    <td><code>--color-bg-secondary</code></td>
                                    <td>#0f0f14</td>
                                    <td>rgb(15, 15, 20)</td>
                                    <td>Section backgrounds</td>
                                </tr>
                                <tr>
                                    <td><code>--color-bg-card</code></td>
                                    <td>#12121a</td>
                                    <td>rgb(18, 18, 26)</td>
                                    <td>Card backgrounds</td>
                                </tr>
                                <tr>
                                    <td><code>--color-bg-elevated</code></td>
                                    <td>#18182a</td>
                                    <td>rgb(24, 24, 42)</td>
                                    <td>Elevated elements, modals</td>
                                </tr>
                                <tr>
                                    <td><code>--color-border-subtle</code></td>
                                    <td>#1f1f2e</td>
                                    <td>rgb(31, 31, 46)</td>
                                    <td>Default borders</td>
                                </tr>
                                <tr>
                                    <td><code>--color-border-accent</code></td>
                                    <td>#2a2a44</td>
                                    <td>rgb(42, 42, 68)</td>
                                    <td>Emphasized borders</td>
                                </tr>
                                <tr>
                                    <td><code>--color-text-primary</code></td>
                                    <td>#f5f5f7</td>
                                    <td>rgb(245, 245, 247)</td>
                                    <td>Primary text, headings</td>
                                </tr>
                                <tr>
                                    <td><code>--color-text-secondary</code></td>
                                    <td>#9898a8</td>
                                    <td>rgb(152, 152, 168)</td>
                                    <td>Body text, descriptions</td>
                                </tr>
                                <tr>
                                    <td><code>--color-text-muted</code></td>
                                    <td>#5c5c6e</td>
                                    <td>rgb(92, 92, 110)</td>
                                    <td>Disabled, placeholders</td>
                                </tr>
                                <tr>
                                    <td><code>--color-accent</code></td>
                                    <td>#00d4aa</td>
                                    <td>rgb(0, 212, 170)</td>
                                    <td>Primary accent (VAYA green)</td>
                                </tr>
                                <tr>
                                    <td><code>--color-accent-hover</code></td>
                                    <td>#00f0c0</td>
                                    <td>rgb(0, 240, 192)</td>
                                    <td>Accent hover state</td>
                                </tr>
                                <tr>
                                    <td><code>--color-danger</code></td>
                                    <td>#ff4757</td>
                                    <td>rgb(255, 71, 87)</td>
                                    <td>Errors, urgent actions, price rising</td>
                                </tr>
                                <tr>
                                    <td><code>--color-warning</code></td>
                                    <td>#ffa502</td>
                                    <td>rgb(255, 165, 2)</td>
                                    <td>Warnings, caution states</td>
                                </tr>
                                <tr>
                                    <td><code>--color-success</code></td>
                                    <td>#2ed573</td>
                                    <td>rgb(46, 213, 115)</td>
                                    <td>Success, price drop, confirmation</td>
                                </tr>
                                <tr>
                                    <td><code>--color-info</code></td>
                                    <td>#3498db</td>
                                    <td>rgb(52, 152, 219)</td>
                                    <td>Informational states</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>2.2 Typography</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Font Families</span>
                        <span class="spec-block-id">TOKEN-FONT-FAMILY</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Value</th>
                                    <th>Usage</th>
                                    <th>Fallback Stack</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--font-display</code></td>
                                    <td>Playfair Display</td>
                                    <td>Hero headings, large titles</td>
                                    <td>Georgia, 'Times New Roman', serif</td>
                                </tr>
                                <tr>
                                    <td><code>--font-body</code></td>
                                    <td>Space Grotesk</td>
                                    <td>Body text, UI elements</td>
                                    <td>-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif</td>
                                </tr>
                                <tr>
                                    <td><code>--font-mono</code></td>
                                    <td>JetBrains Mono</td>
                                    <td>Code, prices, data</td>
                                    <td>'SF Mono', Consolas, monospace</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Type Scale</span>
                        <span class="spec-block-id">TOKEN-FONT-SIZE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Desktop (px)</th>
                                    <th>Tablet (px)</th>
                                    <th>Mobile (px)</th>
                                    <th>Line Height</th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--text-display-1</code></td>
                                    <td>72</td>
                                    <td>56</td>
                                    <td>40</td>
                                    <td>1.1</td>
                                    <td>Hero headlines only</td>
                                </tr>
                                <tr>
                                    <td><code>--text-display-2</code></td>
                                    <td>56</td>
                                    <td>44</td>
                                    <td>32</td>
                                    <td>1.15</td>
                                    <td>Section headlines</td>
                                </tr>
                                <tr>
                                    <td><code>--text-h1</code></td>
                                    <td>40</td>
                                    <td>32</td>
                                    <td>28</td>
                                    <td>1.2</td>
                                    <td>Page titles</td>
                                </tr>
                                <tr>
                                    <td><code>--text-h2</code></td>
                                    <td>32</td>
                                    <td>28</td>
                                    <td>24</td>
                                    <td>1.25</td>
                                    <td>Section titles</td>
                                </tr>
                                <tr>
                                    <td><code>--text-h3</code></td>
                                    <td>24</td>
                                    <td>22</td>
                                    <td>20</td>
                                    <td>1.3</td>
                                    <td>Card titles</td>
                                </tr>
                                <tr>
                                    <td><code>--text-h4</code></td>
                                    <td>20</td>
                                    <td>18</td>
                                    <td>18</td>
                                    <td>1.4</td>
                                    <td>Subsection titles</td>
                                </tr>
                                <tr>
                                    <td><code>--text-body-lg</code></td>
                                    <td>18</td>
                                    <td>17</td>
                                    <td>16</td>
                                    <td>1.6</td>
                                    <td>Large body text</td>
                                </tr>
                                <tr>
                                    <td><code>--text-body</code></td>
                                    <td>16</td>
                                    <td>15</td>
                                    <td>15</td>
                                    <td>1.65</td>
                                    <td>Default body text</td>
                                </tr>
                                <tr>
                                    <td><code>--text-body-sm</code></td>
                                    <td>14</td>
                                    <td>14</td>
                                    <td>14</td>
                                    <td>1.5</td>
                                    <td>Secondary text</td>
                                </tr>
                                <tr>
                                    <td><code>--text-caption</code></td>
                                    <td>12</td>
                                    <td>12</td>
                                    <td>12</td>
                                    <td>1.4</td>
                                    <td>Captions, labels</td>
                                </tr>
                                <tr>
                                    <td><code>--text-overline</code></td>
                                    <td>11</td>
                                    <td>11</td>
                                    <td>11</td>
                                    <td>1.3</td>
                                    <td>Overlines, badges (uppercase)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>2.3 Spacing</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Spacing Scale (8px Base)</span>
                        <span class="spec-block-id">TOKEN-SPACING</span>
                    </div>
                    <div class="spec-block-body">
                        <div class="grid-4">
                            <div class="value-card">
                                <div class="value-card-label">--space-1</div>
                                <div class="value-card-value">4px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-2</div>
                                <div class="value-card-value">8px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-3</div>
                                <div class="value-card-value">12px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-4</div>
                                <div class="value-card-value">16px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-5</div>
                                <div class="value-card-value">24px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-6</div>
                                <div class="value-card-value">32px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-7</div>
                                <div class="value-card-value">48px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-8</div>
                                <div class="value-card-value">64px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-9</div>
                                <div class="value-card-value">96px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--space-10</div>
                                <div class="value-card-value">128px</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>2.4 Breakpoints</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Responsive Breakpoints</span>
                        <span class="spec-block-id">TOKEN-BREAKPOINT</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Min Width</th>
                                    <th>Max Width</th>
                                    <th>Target Devices</th>
                                    <th>UI Variant</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--bp-mobile</code></td>
                                    <td>0px</td>
                                    <td>767px</td>
                                    <td>Phones (portrait & landscape)</td>
                                    <td>Mobile UI</td>
                                </tr>
                                <tr>
                                    <td><code>--bp-tablet</code></td>
                                    <td>768px</td>
                                    <td>1023px</td>
                                    <td>Tablets, small laptops</td>
                                    <td>Tablet UI</td>
                                </tr>
                                <tr>
                                    <td><code>--bp-desktop</code></td>
                                    <td>1024px</td>
                                    <td>1439px</td>
                                    <td>Laptops, desktops</td>
                                    <td>Desktop UI</td>
                                </tr>
                                <tr>
                                    <td><code>--bp-wide</code></td>
                                    <td>1440px</td>
                                    <td>âˆž</td>
                                    <td>Large monitors, ultra-wide</td>
                                    <td>Wide Desktop UI</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="alert alert-warning" style="margin-top: 20px;">
                            <h5>âš ï¸ NOT Responsive â€” THREE SEPARATE UIs</h5>
                            <p>VAYA does NOT use responsive design. It serves THREE completely different UI codebases 
                            based on device detection. This is intentional â€” each device gets a purpose-built experience, 
                            not a scaled version.</p>
                        </div>
                    </div>
                </div>

                <h3>2.5 Animation</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Animation Timings & Easings</span>
                        <span class="spec-block-id">TOKEN-ANIMATION</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Duration</th>
                                    <th>Easing</th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--anim-instant</code></td>
                                    <td>100ms</td>
                                    <td>ease-out</td>
                                    <td>Button hover, focus states</td>
                                </tr>
                                <tr>
                                    <td><code>--anim-fast</code></td>
                                    <td>200ms</td>
                                    <td>cubic-bezier(0.4, 0, 0.2, 1)</td>
                                    <td>Dropdowns, tooltips</td>
                                </tr>
                                <tr>
                                    <td><code>--anim-normal</code></td>
                                    <td>300ms</td>
                                    <td>cubic-bezier(0.4, 0, 0.2, 1)</td>
                                    <td>Cards, modals, page elements</td>
                                </tr>
                                <tr>
                                    <td><code>--anim-slow</code></td>
                                    <td>500ms</td>
                                    <td>cubic-bezier(0.4, 0, 0.2, 1)</td>
                                    <td>Page transitions, large reveals</td>
                                </tr>
                                <tr>
                                    <td><code>--anim-spring</code></td>
                                    <td>400ms</td>
                                    <td>cubic-bezier(0.175, 0.885, 0.32, 1.275)</td>
                                    <td>Bouncy elements, success states</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>2.6 Border Radius</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Border Radius Scale</span>
                        <span class="spec-block-id">TOKEN-RADIUS</span>
                    </div>
                    <div class="spec-block-body">
                        <div class="grid-4">
                            <div class="value-card">
                                <div class="value-card-label">--radius-sm</div>
                                <div class="value-card-value">4px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--radius-md</div>
                                <div class="value-card-value">8px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--radius-lg</div>
                                <div class="value-card-value">12px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--radius-xl</div>
                                <div class="value-card-value">16px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--radius-2xl</div>
                                <div class="value-card-value">24px</div>
                            </div>
                            <div class="value-card">
                                <div class="value-card-label">--radius-full</div>
                                <div class="value-card-value">9999px</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3>2.7 Shadows</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Shadow Definitions</span>
                        <span class="spec-block-id">TOKEN-SHADOW</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Value</th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--shadow-sm</code></td>
                                    <td>0 1px 2px rgba(0, 0, 0, 0.3)</td>
                                    <td>Subtle elevation (buttons)</td>
                                </tr>
                                <tr>
                                    <td><code>--shadow-md</code></td>
                                    <td>0 4px 12px rgba(0, 0, 0, 0.4)</td>
                                    <td>Cards, dropdowns</td>
                                </tr>
                                <tr>
                                    <td><code>--shadow-lg</code></td>
                                    <td>0 12px 32px rgba(0, 0, 0, 0.5)</td>
                                    <td>Modals, popovers</td>
                                </tr>
                                <tr>
                                    <td><code>--shadow-xl</code></td>
                                    <td>0 24px 48px rgba(0, 0, 0, 0.6)</td>
                                    <td>Floating elements</td>
                                </tr>
                                <tr>
                                    <td><code>--shadow-glow-accent</code></td>
                                    <td>0 0 24px rgba(0, 212, 170, 0.3)</td>
                                    <td>Accent glow effects</td>
                                </tr>
                                <tr>
                                    <td><code>--shadow-glow-danger</code></td>
                                    <td>0 0 24px rgba(255, 71, 87, 0.3)</td>
                                    <td>Urgent/danger glow</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>2.8 Z-Index Scale</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Z-Index Layers</span>
                        <span class="spec-block-id">TOKEN-ZINDEX</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Token</th>
                                    <th>Value</th>
                                    <th>Usage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>--z-base</code></td>
                                    <td>0</td>
                                    <td>Default content</td>
                                </tr>
                                <tr>
                                    <td><code>--z-dropdown</code></td>
                                    <td>100</td>
                                    <td>Dropdowns, autocomplete</td>
                                </tr>
                                <tr>
                                    <td><code>--z-sticky</code></td>
                                    <td>200</td>
                                    <td>Sticky headers</td>
                                </tr>
                                <tr>
                                    <td><code>--z-overlay</code></td>
                                    <td>300</td>
                                    <td>Overlay backgrounds</td>
                                </tr>
                                <tr>
                                    <td><code>--z-modal</code></td>
                                    <td>400</td>
                                    <td>Modal dialogs</td>
                                </tr>
                                <tr>
                                    <td><code>--z-popover</code></td>
                                    <td>500</td>
                                    <td>Popovers, tooltips</td>
                                </tr>
                                <tr>
                                    <td><code>--z-toast</code></td>
                                    <td>600</td>
                                    <td>Toast notifications</td>
                                </tr>
                                <tr>
                                    <td><code>--z-max</code></td>
                                    <td>9999</td>
                                    <td>Critical overlays only</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 3: Database Schema -->
            <section id="database">
                <div class="section-header">
                    <div class="section-id">Section 03</div>
                    <h2>Database Schema</h2>
                    <p class="section-desc">
                        Complete entity definitions, relationships, and constraints. 
                        No ambiguity in data modeling.
                    </p>
                </div>

                <h3>3.1 Core Entities</h3>

                <div class="schema">
                    <div class="schema-title">users</div>
                    <div class="schema-field">
                        <span class="schema-field-name">id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Primary key, auto-generated (UUIDv4)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">email</span>
                        <span class="schema-field-type">VARCHAR(255)</span>
                        <span class="schema-field-desc">Unique, verified email address</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">password_hash</span>
                        <span class="schema-field-type">VARCHAR(255)</span>
                        <span class="schema-field-desc">Argon2id hash (never store plaintext)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">display_name</span>
                        <span class="schema-field-type">VARCHAR(100)</span>
                        <span class="schema-field-desc">User's display name</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">status</span>
                        <span class="schema-field-type">ENUM</span>
                        <span class="schema-field-desc">Values: 'anonymous', 'registered', 'premium', 'churned', 'suspended'</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">preferences</span>
                        <span class="schema-field-type">JSONB</span>
                        <span class="schema-field-desc">User preferences object (see preferences schema)</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">created_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Account creation timestamp (UTC)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">updated_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Last modification timestamp (auto-updated)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">last_login_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Last successful login timestamp</span>
                    </div>
                </div>

                <div class="schema">
                    <div class="schema-title">predictions</div>
                    <div class="schema-field">
                        <span class="schema-field-name">id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Primary key</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">route_id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Foreign key to routes table</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">departure_date</span>
                        <span class="schema-field-type">DATE</span>
                        <span class="schema-field-desc">Target departure date for prediction</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">current_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Current observed price in USD</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">predicted_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Oracle's predicted price in USD</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">confidence_score</span>
                        <span class="schema-field-type">DECIMAL(5,2)</span>
                        <span class="schema-field-desc">Confidence 0.00-100.00</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">directive</span>
                        <span class="schema-field-type">ENUM</span>
                        <span class="schema-field-desc">Values: 'WAIT', 'BOOK_NOW', 'BOOK_URGENT'</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">wait_days</span>
                        <span class="schema-field-type">INTEGER</span>
                        <span class="schema-field-desc">Days to wait if directive is WAIT (null otherwise)</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">reasoning</span>
                        <span class="schema-field-type">TEXT</span>
                        <span class="schema-field-desc">Human-readable explanation of prediction</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">reasoning_factors</span>
                        <span class="schema-field-type">JSONB</span>
                        <span class="schema-field-desc">Structured factors contributing to prediction</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">model_version</span>
                        <span class="schema-field-type">VARCHAR(50)</span>
                        <span class="schema-field-desc">Version of ML model used</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">created_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">When prediction was generated</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">expires_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">When prediction becomes stale (typically 24h)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">actual_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Actual price observed (for accuracy tracking)</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">was_accurate</span>
                        <span class="schema-field-type">BOOLEAN</span>
                        <span class="schema-field-desc">Whether prediction was within Â±10% of actual</span>
                    </div>
                </div>

                <div class="schema">
                    <div class="schema-title">demand_pools</div>
                    <div class="schema-field">
                        <span class="schema-field-name">id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Primary key</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">route_id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Foreign key to routes</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">date_range_start</span>
                        <span class="schema-field-type">DATE</span>
                        <span class="schema-field-desc">Start of target travel window</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">date_range_end</span>
                        <span class="schema-field-type">DATE</span>
                        <span class="schema-field-desc">End of target travel window</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">member_count</span>
                        <span class="schema-field-type">INTEGER</span>
                        <span class="schema-field-desc">Current number of users in pool</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">activation_threshold</span>
                        <span class="schema-field-type">INTEGER</span>
                        <span class="schema-field-desc">Members needed to activate (default: 100)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">status</span>
                        <span class="schema-field-type">ENUM</span>
                        <span class="schema-field-desc">Values: 'FORMING', 'ACTIVE', 'BIDDING', 'CLOSED', 'EXPIRED'</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">average_max_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Average max price members willing to pay</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">expected_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Expected pool price if activated</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">created_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Pool creation timestamp</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">expires_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Pool expiration if not activated</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                </div>

                <div class="schema">
                    <div class="schema-title">bookings</div>
                    <div class="schema-field">
                        <span class="schema-field-name">id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Primary key</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">user_id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Foreign key to users</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">reference_code</span>
                        <span class="schema-field-type">VARCHAR(20)</span>
                        <span class="schema-field-desc">VAYA booking reference (e.g., VAYA-TYO-9847)</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">pnr</span>
                        <span class="schema-field-type">VARCHAR(10)</span>
                        <span class="schema-field-desc">Airline PNR/confirmation number</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">status</span>
                        <span class="schema-field-type">ENUM</span>
                        <span class="schema-field-desc">Values: 'PENDING', 'CONFIRMED', 'COMPLETED', 'CANCELLED', 'FAILED', 'MODIFIED', 'EXPIRED'</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">flight_segments</span>
                        <span class="schema-field-type">JSONB</span>
                        <span class="schema-field-desc">Array of flight segment details</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">passengers</span>
                        <span class="schema-field-type">JSONB</span>
                        <span class="schema-field-desc">Array of passenger details</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">total_price</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Total booking price in USD</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">currency</span>
                        <span class="schema-field-type">CHAR(3)</span>
                        <span class="schema-field-desc">ISO 4217 currency code</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">savings_amount</span>
                        <span class="schema-field-type">DECIMAL(10,2)</span>
                        <span class="schema-field-desc">Calculated savings vs average market price</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">booking_source</span>
                        <span class="schema-field-type">ENUM</span>
                        <span class="schema-field-desc">Values: 'DIRECT', 'DEMAND_POOL', 'ATA', 'ERROR_FARE'</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">prediction_id</span>
                        <span class="schema-field-type">UUID</span>
                        <span class="schema-field-desc">Foreign key to prediction that led to this booking</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">created_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">Booking initiation timestamp</span>
                        <span class="schema-field-required">REQUIRED</span>
                    </div>
                    <div class="schema-field">
                        <span class="schema-field-name">confirmed_at</span>
                        <span class="schema-field-type">TIMESTAMPTZ</span>
                        <span class="schema-field-desc">When booking was confirmed</span>
                    </div>
                </div>

                <h3>3.2 Indexes (Performance Critical)</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Required Indexes</span>
                        <span class="spec-block-id">DB-INDEX</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-comment">-- User lookups</span>
<span class="code-key">CREATE UNIQUE INDEX</span> idx_users_email <span class="code-key">ON</span> users(email);
<span class="code-key">CREATE INDEX</span> idx_users_status <span class="code-key">ON</span> users(status);

<span class="code-comment">-- Prediction queries</span>
<span class="code-key">CREATE INDEX</span> idx_predictions_route_date <span class="code-key">ON</span> predictions(route_id, departure_date);
<span class="code-key">CREATE INDEX</span> idx_predictions_expires <span class="code-key">ON</span> predictions(expires_at) <span class="code-key">WHERE</span> expires_at > NOW();
<span class="code-key">CREATE INDEX</span> idx_predictions_accuracy <span class="code-key">ON</span> predictions(was_accurate) <span class="code-key">WHERE</span> actual_price IS NOT NULL;

<span class="code-comment">-- Demand pool lookups</span>
<span class="code-key">CREATE INDEX</span> idx_pools_route_status <span class="code-key">ON</span> demand_pools(route_id, status);
<span class="code-key">CREATE INDEX</span> idx_pools_active <span class="code-key">ON</span> demand_pools(status, member_count) <span class="code-key">WHERE</span> status = 'ACTIVE';

<span class="code-comment">-- Booking queries</span>
<span class="code-key">CREATE INDEX</span> idx_bookings_user <span class="code-key">ON</span> bookings(user_id, created_at DESC);
<span class="code-key">CREATE INDEX</span> idx_bookings_status <span class="code-key">ON</span> bookings(status) <span class="code-key">WHERE</span> status IN ('PENDING', 'CONFIRMED');
<span class="code-key">CREATE UNIQUE INDEX</span> idx_bookings_ref <span class="code-key">ON</span> bookings(reference_code);
                        </pre>
                    </div>
                </div>
            </section>

            <!-- Section 4: API Specification -->
            <section id="api">
                <div class="section-header">
                    <div class="section-id">Section 04</div>
                    <h2>API Specification</h2>
                    <p class="section-desc">
                        Complete REST API contract. Every endpoint, request, response defined.
                        No guessing what the backend returns.
                    </p>
                </div>

                <h3>4.1 Authentication</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">POST /api/v1/auth/login</span>
                        <span class="spec-block-id">API-AUTH-001</span>
                    </div>
                    <div class="spec-block-body">
                        <h4>Request</h4>
                        <pre>
{
  <span class="code-key">"email"</span>: <span class="code-string">"user@example.com"</span>,
  <span class="code-key">"password"</span>: <span class="code-string">"********"</span>,
  <span class="code-key">"device_id"</span>: <span class="code-string">"uuid-v4-device-fingerprint"</span>  <span class="code-comment">// Optional, for device tracking</span>
}
                        </pre>

                        <h4>Response (200 OK)</h4>
                        <pre>
{
  <span class="code-key">"access_token"</span>: <span class="code-string">"eyJhbGciOiJIUzI1NiIs..."</span>,
  <span class="code-key">"refresh_token"</span>: <span class="code-string">"dGhpcyBpcyBhIHJlZnJlc2..."</span>,
  <span class="code-key">"expires_in"</span>: <span class="code-value">3600</span>,  <span class="code-comment">// seconds</span>
  <span class="code-key">"token_type"</span>: <span class="code-string">"Bearer"</span>,
  <span class="code-key">"user"</span>: {
    <span class="code-key">"id"</span>: <span class="code-string">"uuid"</span>,
    <span class="code-key">"email"</span>: <span class="code-string">"user@example.com"</span>,
    <span class="code-key">"display_name"</span>: <span class="code-string">"John Doe"</span>,
    <span class="code-key">"status"</span>: <span class="code-string">"premium"</span>,
    <span class="code-key">"preferences"</span>: { ... }
  }
}
                        </pre>

                        <h4>Error Responses</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>Code</th>
                                    <th>Message</th>
                                    <th>When</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>400</td>
                                    <td><code>INVALID_REQUEST</code></td>
                                    <td>"Email and password required"</td>
                                    <td>Missing fields</td>
                                </tr>
                                <tr>
                                    <td>401</td>
                                    <td><code>INVALID_CREDENTIALS</code></td>
                                    <td>"Invalid email or password"</td>
                                    <td>Wrong credentials</td>
                                </tr>
                                <tr>
                                    <td>403</td>
                                    <td><code>ACCOUNT_SUSPENDED</code></td>
                                    <td>"Account suspended. Contact support."</td>
                                    <td>User suspended</td>
                                </tr>
                                <tr>
                                    <td>429</td>
                                    <td><code>RATE_LIMITED</code></td>
                                    <td>"Too many attempts. Try again in {n} seconds."</td>
                                    <td>>5 attempts/min</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>4.2 Predictions</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">GET /api/v1/predictions</span>
                        <span class="spec-block-id">API-PRED-001</span>
                    </div>
                    <div class="spec-block-body">
                        <h4>Query Parameters</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>origin</code></td>
                                    <td>string</td>
                                    <td><span class="tag tag-required">Required</span></td>
                                    <td>IATA airport code (e.g., "KUL")</td>
                                </tr>
                                <tr>
                                    <td><code>destination</code></td>
                                    <td>string</td>
                                    <td><span class="tag tag-required">Required</span></td>
                                    <td>IATA airport code (e.g., "NRT")</td>
                                </tr>
                                <tr>
                                    <td><code>departure_date</code></td>
                                    <td>date</td>
                                    <td><span class="tag tag-required">Required</span></td>
                                    <td>ISO 8601 date (YYYY-MM-DD)</td>
                                </tr>
                                <tr>
                                    <td><code>return_date</code></td>
                                    <td>date</td>
                                    <td><span class="tag tag-optional">Optional</span></td>
                                    <td>ISO 8601 date for round trip</td>
                                </tr>
                                <tr>
                                    <td><code>passengers</code></td>
                                    <td>integer</td>
                                    <td><span class="tag tag-optional">Optional</span></td>
                                    <td>Number of passengers (default: 1, max: 9)</td>
                                </tr>
                                <tr>
                                    <td><code>cabin_class</code></td>
                                    <td>string</td>
                                    <td><span class="tag tag-optional">Optional</span></td>
                                    <td>Values: "economy", "premium_economy", "business", "first"</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>Response (200 OK)</h4>
                        <pre>
{
  <span class="code-key">"prediction"</span>: {
    <span class="code-key">"id"</span>: <span class="code-string">"pred_uuid"</span>,
    <span class="code-key">"route"</span>: {
      <span class="code-key">"origin"</span>: { <span class="code-key">"code"</span>: <span class="code-string">"KUL"</span>, <span class="code-key">"name"</span>: <span class="code-string">"Kuala Lumpur International"</span>, <span class="code-key">"city"</span>: <span class="code-string">"Kuala Lumpur"</span> },
      <span class="code-key">"destination"</span>: { <span class="code-key">"code"</span>: <span class="code-string">"NRT"</span>, <span class="code-key">"name"</span>: <span class="code-string">"Narita International"</span>, <span class="code-key">"city"</span>: <span class="code-string">"Tokyo"</span> }
    },
    <span class="code-key">"departure_date"</span>: <span class="code-string">"2026-03-15"</span>,
    <span class="code-key">"current_price"</span>: {
      <span class="code-key">"amount"</span>: <span class="code-value">847.00</span>,
      <span class="code-key">"currency"</span>: <span class="code-string">"USD"</span>
    },
    <span class="code-key">"predicted_price"</span>: {
      <span class="code-key">"amount"</span>: <span class="code-value">612.00</span>,
      <span class="code-key">"currency"</span>: <span class="code-string">"USD"</span>
    },
    <span class="code-key">"price_change_percent"</span>: <span class="code-value">-27.74</span>,
    <span class="code-key">"directive"</span>: <span class="code-string">"WAIT"</span>,
    <span class="code-key">"wait_days"</span>: <span class="code-value">4</span>,
    <span class="code-key">"confidence_score"</span>: <span class="code-value">87.3</span>,
    <span class="code-key">"reasoning"</span>: <span class="code-string">"Singapore Airlines recently lost a corporate contract with Accenture, freeing up 40 seats/day on this route. Price adjustment expected within 4 days."</span>,
    <span class="code-key">"reasoning_factors"</span>: [
      { <span class="code-key">"type"</span>: <span class="code-string">"corporate_contract"</span>, <span class="code-key">"impact"</span>: <span class="code-string">"high"</span>, <span class="code-key">"description"</span>: <span class="code-string">"Lost Accenture contract"</span> },
      { <span class="code-key">"type"</span>: <span class="code-string">"historical_pattern"</span>, <span class="code-key">"impact"</span>: <span class="code-string">"medium"</span>, <span class="code-key">"description"</span>: <span class="code-string">"Similar drops observed 3 times in past year"</span> }
    ],
    <span class="code-key">"generated_at"</span>: <span class="code-string">"2026-01-08T10:30:00Z"</span>,
    <span class="code-key">"expires_at"</span>: <span class="code-string">"2026-01-09T10:30:00Z"</span>
  },
  <span class="code-key">"price_history"</span>: [
    { <span class="code-key">"date"</span>: <span class="code-string">"2026-01-01"</span>, <span class="code-key">"price"</span>: <span class="code-value">890.00</span> },
    { <span class="code-key">"date"</span>: <span class="code-string">"2026-01-02"</span>, <span class="code-key">"price"</span>: <span class="code-value">875.00</span> },
    <span class="code-comment">// ... last 30 days</span>
  ],
  <span class="code-key">"oracle_accuracy"</span>: {
    <span class="code-key">"overall"</span>: <span class="code-value">87.3</span>,
    <span class="code-key">"this_route"</span>: <span class="code-value">91.2</span>,
    <span class="code-key">"sample_size"</span>: <span class="code-value">1247</span>
  }
}
                        </pre>
                    </div>
                </div>

                <h3>4.3 Standard Error Response Format</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Error Response Schema</span>
                        <span class="spec-block-id">API-ERROR</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
{
  <span class="code-key">"error"</span>: {
    <span class="code-key">"code"</span>: <span class="code-string">"ERROR_CODE"</span>,           <span class="code-comment">// Machine-readable code (SCREAMING_SNAKE_CASE)</span>
    <span class="code-key">"message"</span>: <span class="code-string">"Human readable message"</span>,  <span class="code-comment">// User-facing message</span>
    <span class="code-key">"details"</span>: { ... },              <span class="code-comment">// Optional additional context</span>
    <span class="code-key">"request_id"</span>: <span class="code-string">"req_uuid"</span>,       <span class="code-comment">// For support/debugging</span>
    <span class="code-key">"timestamp"</span>: <span class="code-string">"2026-01-08T10:30:00Z"</span>
  }
}
                        </pre>

                        <h4>Standard Error Codes</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>HTTP Status</th>
                                    <th>Error Code</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>400</td><td><code>INVALID_REQUEST</code></td><td>Malformed request body or parameters</td></tr>
                                <tr><td>400</td><td><code>VALIDATION_ERROR</code></td><td>Field validation failed (details in response)</td></tr>
                                <tr><td>401</td><td><code>UNAUTHORIZED</code></td><td>Missing or invalid authentication</td></tr>
                                <tr><td>401</td><td><code>TOKEN_EXPIRED</code></td><td>Access token has expired</td></tr>
                                <tr><td>403</td><td><code>FORBIDDEN</code></td><td>User lacks permission for this action</td></tr>
                                <tr><td>403</td><td><code>PREMIUM_REQUIRED</code></td><td>Feature requires premium subscription</td></tr>
                                <tr><td>404</td><td><code>NOT_FOUND</code></td><td>Requested resource does not exist</td></tr>
                                <tr><td>409</td><td><code>CONFLICT</code></td><td>Resource already exists or state conflict</td></tr>
                                <tr><td>422</td><td><code>UNPROCESSABLE</code></td><td>Valid syntax but semantically incorrect</td></tr>
                                <tr><td>429</td><td><code>RATE_LIMITED</code></td><td>Too many requests</td></tr>
                                <tr><td>500</td><td><code>INTERNAL_ERROR</code></td><td>Unexpected server error</td></tr>
                                <tr><td>502</td><td><code>UPSTREAM_ERROR</code></td><td>Third-party service failure</td></tr>
                                <tr><td>503</td><td><code>SERVICE_UNAVAILABLE</code></td><td>Service temporarily unavailable</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 5: ML Model Architecture -->
            <section id="ml-models">
                <div class="section-header">
                    <div class="section-id">Section 05</div>
                    <h2>ML Model Architecture</h2>
                    <p class="section-desc">
                        Complete specification of all machine learning models powering Oracle Engine.
                        No ambiguity in model inputs, outputs, or training requirements.
                    </p>
                </div>

                <h3>5.1 Model Inventory</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Production Models</span>
                        <span class="spec-block-id">ML-INV</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Model Name</th>
                                    <th>Type</th>
                                    <th>Purpose</th>
                                    <th>Priority</th>
                                    <th>Target Accuracy</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>price_predictor</code></td>
                                    <td>Gradient Boosting (XGBoost)</td>
                                    <td>Predict future price for route/date</td>
                                    <td><span class="tag tag-critical">P0</span></td>
                                    <td>Â±10% of actual (85%+ of predictions)</td>
                                </tr>
                                <tr>
                                    <td><code>demand_forecaster</code></td>
                                    <td>LSTM + Attention</td>
                                    <td>Predict booking demand for route/date</td>
                                    <td><span class="tag tag-critical">P0</span></td>
                                    <td>Â±15% of actual demand</td>
                                </tr>
                                <tr>
                                    <td><code>optimal_timing</code></td>
                                    <td>Reinforcement Learning (PPO)</td>
                                    <td>Determine best time to book</td>
                                    <td><span class="tag tag-critical">P0</span></td>
                                    <td>>70% of recommendations save money</td>
                                </tr>
                                <tr>
                                    <td><code>anomaly_detector</code></td>
                                    <td>Isolation Forest + Rules</td>
                                    <td>Detect error fares, unusual pricing</td>
                                    <td><span class="tag tag-important">P1</span></td>
                                    <td>>90% recall, <5% false positive</td>
                                </tr>
                                <tr>
                                    <td><code>user_preference</code></td>
                                    <td>Neural Collaborative Filtering</td>
                                    <td>Personalize recommendations</td>
                                    <td><span class="tag tag-important">P1</span></td>
                                    <td>>60% CTR improvement vs random</td>
                                </tr>
                                <tr>
                                    <td><code>disruption_predictor</code></td>
                                    <td>Graph Neural Network</td>
                                    <td>Predict delays, cancellations</td>
                                    <td><span class="tag tag-optional">P2</span></td>
                                    <td>>80% recall on major disruptions</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>5.2 Price Predictor Model (P0)</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">price_predictor Specification</span>
                        <span class="spec-block-id">ML-PRICE</span>
                    </div>
                    <div class="spec-block-body">
                        <h4>Input Features (47 total)</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature Category</th>
                                    <th>Features</th>
                                    <th>Source</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Route Features</td>
                                    <td>origin_code, destination_code, distance_km, route_popularity_rank, num_carriers, is_hub_to_hub</td>
                                    <td>Static DB</td>
                                </tr>
                                <tr>
                                    <td>Temporal Features</td>
                                    <td>departure_dow, departure_month, days_until_departure, is_holiday, is_school_break, is_peak_season</td>
                                    <td>Calendar API</td>
                                </tr>
                                <tr>
                                    <td>Historical Price</td>
                                    <td>price_7d_avg, price_30d_avg, price_90d_avg, price_yoy_change, price_volatility_30d, min_price_90d, max_price_90d</td>
                                    <td>Price History DB</td>
                                </tr>
                                <tr>
                                    <td>Demand Signals</td>
                                    <td>search_volume_7d, search_volume_trend, booking_pace, seat_availability_pct, load_factor_estimate</td>
                                    <td>Internal + GDS</td>
                                </tr>
                                <tr>
                                    <td>Competitor Prices</td>
                                    <td>competitor_min_price, competitor_avg_price, our_price_rank, price_gap_to_min</td>
                                    <td>Scraping/API</td>
                                </tr>
                                <tr>
                                    <td>External Factors</td>
                                    <td>fuel_price_index, currency_rate_trend, gdp_growth_origin, gdp_growth_dest, event_score</td>
                                    <td>External APIs</td>
                                </tr>
                                <tr>
                                    <td>Airline Features</td>
                                    <td>carrier_code, carrier_market_share, carrier_price_tier, carrier_recent_news_sentiment</td>
                                    <td>Static + NLP</td>
                                </tr>
                            </tbody>
                        </table>

                        <h4>Output Schema</h4>
                        <pre>
{
  <span class="code-key">"predicted_price"</span>: <span class="code-value">612.00</span>,           <span class="code-comment">// USD</span>
  <span class="code-key">"prediction_lower_bound"</span>: <span class="code-value">580.00</span>,  <span class="code-comment">// 90% CI lower</span>
  <span class="code-key">"prediction_upper_bound"</span>: <span class="code-value">650.00</span>,  <span class="code-comment">// 90% CI upper</span>
  <span class="code-key">"confidence_score"</span>: <span class="code-value">87.3</span>,          <span class="code-comment">// 0-100</span>
  <span class="code-key">"prediction_horizon_days"</span>: <span class="code-value">4</span>,      <span class="code-comment">// When this price expected</span>
  <span class="code-key">"feature_importance"</span>: [             <span class="code-comment">// Top 5 factors</span>
    { <span class="code-key">"feature"</span>: <span class="code-string">"seat_availability_pct"</span>, <span class="code-key">"importance"</span>: <span class="code-value">0.23</span> },
    { <span class="code-key">"feature"</span>: <span class="code-string">"days_until_departure"</span>, <span class="code-key">"importance"</span>: <span class="code-value">0.18</span> },
    { <span class="code-key">"feature"</span>: <span class="code-string">"price_30d_avg"</span>, <span class="code-key">"importance"</span>: <span class="code-value">0.15</span> },
    { <span class="code-key">"feature"</span>: <span class="code-string">"search_volume_trend"</span>, <span class="code-key">"importance"</span>: <span class="code-value">0.12</span> },
    { <span class="code-key">"feature"</span>: <span class="code-string">"event_score"</span>, <span class="code-key">"importance"</span>: <span class="code-value">0.09</span> }
  ],
  <span class="code-key">"model_version"</span>: <span class="code-string">"price_predictor_v2.3.1"</span>
}
                        </pre>

                        <h4>Training Requirements</h4>
                        <table>
                            <thead>
                                <tr>
                                    <th>Requirement</th>
                                    <th>Specification</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Training Data</td>
                                    <td>Minimum 2 years historical data per route</td>
                                </tr>
                                <tr>
                                    <td>Training Frequency</td>
                                    <td>Weekly full retrain, daily incremental</td>
                                </tr>
                                <tr>
                                    <td>Validation Split</td>
                                    <td>80% train, 10% validation, 10% test (time-based split)</td>
                                </tr>
                                <tr>
                                    <td>Minimum Accuracy</td>
                                    <td>85% of predictions within Â±10% of actual</td>
                                </tr>
                                <tr>
                                    <td>Inference Latency</td>
                                    <td>&lt;100ms p99</td>
                                </tr>
                                <tr>
                                    <td>Model Size</td>
                                    <td>&lt;500MB serialized</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>5.3 Confidence Score Calculation</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Confidence Score Formula</span>
                        <span class="spec-block-id">ML-CONF</span>
                    </div>
                    <div class="spec-block-body">
                        <p style="color: var(--text-secondary); margin-bottom: 16px;">
                            Confidence is NOT arbitrary. It's calculated from verifiable factors:
                        </p>
                        <pre>
<span class="code-comment">// Confidence Score Calculation</span>
confidence_score = (
    historical_accuracy_weight * route_historical_accuracy +    <span class="code-comment">// 40%</span>
    data_quality_weight * data_completeness_score +             <span class="code-comment">// 25%</span>
    pattern_match_weight * similar_pattern_accuracy +           <span class="code-comment">// 20%</span>
    recency_weight * data_recency_score +                       <span class="code-comment">// 10%</span>
    volatility_penalty * (1 - route_volatility_score)           <span class="code-comment">// 5%</span>
) * 100

<span class="code-comment">// Components:</span>
<span class="code-key">route_historical_accuracy</span>: <span class="code-comment">% of past predictions on this route within Â±10%</span>
<span class="code-key">data_completeness_score</span>: <span class="code-comment">% of input features available (vs imputed)</span>
<span class="code-key">similar_pattern_accuracy</span>: <span class="code-comment">Accuracy on similar routes/dates in past</span>
<span class="code-key">data_recency_score</span>: <span class="code-comment">How recent is training data (decays over time)</span>
<span class="code-key">route_volatility_score</span>: <span class="code-comment">Historical price volatility (high = penalty)</span>
                        </pre>

                        <div class="alert alert-warning">
                            <h5>âš ï¸ Confidence Thresholds for Display</h5>
                            <ul>
                                <li><strong>&gt;80%:</strong> Show prediction with full confidence UI</li>
                                <li><strong>60-80%:</strong> Show prediction with "moderate confidence" label</li>
                                <li><strong>40-60%:</strong> Show prediction with strong caveat + suggest flexibility</li>
                                <li><strong>&lt;40%:</strong> Do NOT show prediction. Display "Insufficient data" message.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section 6: Business Rules Engine -->
            <section id="business-rules">
                <div class="section-header">
                    <div class="section-id">Section 06</div>
                    <h2>Business Rules Engine</h2>
                    <p class="section-desc">
                        All business logic codified. No "use your judgment" ambiguity.
                        Every decision has explicit rules.
                    </p>
                </div>

                <h3>6.1 Directive Rules</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Wait/Book Directive Logic</span>
                        <span class="spec-block-id">BIZ-DIRECTIVE</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-comment">// Directive Decision Tree</span>

<span class="code-key">function</span> determineDirective(prediction, context):
    
    <span class="code-comment">// Rule 1: Error fare detected â†’ BOOK_URGENT</span>
    <span class="code-key">if</span> prediction.is_error_fare:
        <span class="code-key">return</span> {
            directive: <span class="code-string">"BOOK_URGENT"</span>,
            reason: <span class="code-string">"Error fare detected. Book immediately before correction."</span>,
            urgency_hours: prediction.estimated_correction_hours
        }
    
    <span class="code-comment">// Rule 2: Price rising + departure imminent â†’ BOOK_URGENT</span>
    <span class="code-key">if</span> prediction.price_trend == <span class="code-string">"RISING"</span> AND context.days_to_departure < 14:
        <span class="code-key">return</span> {
            directive: <span class="code-string">"BOOK_URGENT"</span>,
            reason: <span class="code-string">"Price rising rapidly. Book now to avoid higher prices."</span>,
            expected_increase_pct: prediction.expected_increase_pct
        }
    
    <span class="code-comment">// Rule 3: At or near historical low â†’ BOOK_NOW</span>
    <span class="code-key">if</span> prediction.current_price <= prediction.historical_p10:
        <span class="code-key">return</span> {
            directive: <span class="code-string">"BOOK_NOW"</span>,
            reason: <span class="code-string">"Price is at historical low. Unlikely to go lower."</span>,
            percentile: prediction.current_price_percentile
        }
    
    <span class="code-comment">// Rule 4: Significant drop predicted + confidence high â†’ WAIT</span>
    <span class="code-key">if</span> prediction.expected_drop_pct >= 15 AND prediction.confidence >= 75:
        <span class="code-key">return</span> {
            directive: <span class="code-string">"WAIT"</span>,
            wait_days: prediction.optimal_booking_days,
            reason: prediction.drop_reason,
            expected_savings: prediction.expected_savings
        }
    
    <span class="code-comment">// Rule 5: Moderate drop predicted + enough time â†’ WAIT</span>
    <span class="code-key">if</span> prediction.expected_drop_pct >= 8 AND context.days_to_departure > 21:
        <span class="code-key">return</span> {
            directive: <span class="code-string">"WAIT"</span>,
            wait_days: min(prediction.optimal_booking_days, 7),
            reason: prediction.drop_reason,
            expected_savings: prediction.expected_savings
        }
    
    <span class="code-comment">// Rule 6: Default â†’ BOOK_NOW (when uncertain, don't risk it)</span>
    <span class="code-key">return</span> {
        directive: <span class="code-string">"BOOK_NOW"</span>,
        reason: <span class="code-string">"Current price is reasonable. No significant drop expected."</span>
    }
                        </pre>
                    </div>
                </div>

                <h3>6.2 Pricing Rules</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Commission & Markup Rules</span>
                        <span class="spec-block-id">BIZ-PRICING</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Booking Source</th>
                                    <th>VAYA Margin</th>
                                    <th>Calculation</th>
                                    <th>Min/Max</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Direct Affiliate Booking</td>
                                    <td>Commission from airline/OTA</td>
                                    <td>Passed through, no markup</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Demand Pool Booking</td>
                                    <td>3-5% of savings</td>
                                    <td>(market_price - pool_price) Ã— 0.03-0.05</td>
                                    <td>Min $5, Max $50 per passenger</td>
                                </tr>
                                <tr>
                                    <td>Pre-Acquired Inventory</td>
                                    <td>8-15% arbitrage spread</td>
                                    <td>sell_price - acquisition_cost</td>
                                    <td>Min 5%, Max 20%</td>
                                </tr>
                                <tr>
                                    <td>ATA Subscription</td>
                                    <td>$29/month flat</td>
                                    <td>Fixed subscription</td>
                                    <td>No per-booking fee</td>
                                </tr>
                                <tr>
                                    <td>Error Fare Booking</td>
                                    <td>$10 flat fee</td>
                                    <td>Fixed service fee</td>
                                    <td>Fixed</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>6.3 Demand Pool Rules</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Pool Lifecycle Rules</span>
                        <span class="spec-block-id">BIZ-POOL</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Rule</th>
                                    <th>Condition</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Pool Creation</td>
                                    <td>User declares intent for route with no existing pool</td>
                                    <td>Create new pool, user becomes first member</td>
                                </tr>
                                <tr>
                                    <td>Pool Joining</td>
                                    <td>User intent matches existing pool (Â±3 days, same route)</td>
                                    <td>Add to existing pool, increment count</td>
                                </tr>
                                <tr>
                                    <td>Activation Threshold</td>
                                    <td>member_count >= 100 (configurable per route)</td>
                                    <td>Status â†’ ACTIVE, begin airline outreach</td>
                                </tr>
                                <tr>
                                    <td>Bidding Window</td>
                                    <td>Pool ACTIVE for 48 hours</td>
                                    <td>Accept airline bids during window</td>
                                </tr>
                                <tr>
                                    <td>Bid Selection</td>
                                    <td>Bidding window closed</td>
                                    <td>Select best bid, notify members</td>
                                </tr>
                                <tr>
                                    <td>Member Confirmation</td>
                                    <td>Best bid selected</td>
                                    <td>Members have 24h to confirm booking</td>
                                </tr>
                                <tr>
                                    <td>Pool Expiration</td>
                                    <td>14 days without activation OR 7 days before departure</td>
                                    <td>Dissolve pool, notify members, no charge</td>
                                </tr>
                                <tr>
                                    <td>Member Exit</td>
                                    <td>User requests exit before bidding</td>
                                    <td>Remove from pool, no penalty</td>
                                </tr>
                                <tr>
                                    <td>Member Exit (Late)</td>
                                    <td>User exits after confirming bid</td>
                                    <td>Cancellation fee applies per airline terms</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>6.4 Alert Rules</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Notification Trigger Rules</span>
                        <span class="spec-block-id">BIZ-ALERT</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Alert Type</th>
                                    <th>Trigger Condition</th>
                                    <th>Channels</th>
                                    <th>Frequency Limit</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Price Drop Alert</td>
                                    <td>Watched route drops â‰¥15% from user's last seen price</td>
                                    <td>Push, Email</td>
                                    <td>Max 1 per route per 24h</td>
                                </tr>
                                <tr>
                                    <td>Error Fare Alert</td>
                                    <td>anomaly_detector flags fare â‰¥50% below normal</td>
                                    <td>Push (immediate), Email, SMS (premium)</td>
                                    <td>No limit (time-sensitive)</td>
                                </tr>
                                <tr>
                                    <td>Wait Timer Complete</td>
                                    <td>User's wait period from WAIT directive expires</td>
                                    <td>Push, Email</td>
                                    <td>1 per directive</td>
                                </tr>
                                <tr>
                                    <td>Pool Update</td>
                                    <td>Pool reaches 50%, 75%, 100% of activation threshold</td>
                                    <td>Push</td>
                                    <td>Max 3 per pool</td>
                                </tr>
                                <tr>
                                    <td>Pool Activated</td>
                                    <td>Pool status â†’ ACTIVE</td>
                                    <td>Push, Email</td>
                                    <td>1 per pool</td>
                                </tr>
                                <tr>
                                    <td>Bid Received</td>
                                    <td>New airline bid on user's pool</td>
                                    <td>Push</td>
                                    <td>Max 3 per pool</td>
                                </tr>
                                <tr>
                                    <td>Booking Confirmation</td>
                                    <td>Booking status â†’ CONFIRMED</td>
                                    <td>Email (required), Push</td>
                                    <td>1 per booking</td>
                                </tr>
                                <tr>
                                    <td>Trip Reminder</td>
                                    <td>24h before departure</td>
                                    <td>Push, Email</td>
                                    <td>1 per trip</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 7: User Journey Maps -->
            <section id="user-journeys" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 07</div>
                    <h2>User Journey Maps</h2>
                    <p class="section-desc">
                        Complete user flows for every major action. 
                        Every screen, every decision point, every edge case documented.
                    </p>
                </div>

                <h3>7.1 First-Time User Journey</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">New User â†’ First Booking</span>
                        <span class="spec-block-id">JOUR-NEW</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-comment">// Step-by-step flow with screens and actions</span>

<span class="code-key">STEP 1: Landing Page</span>
â”œâ”€â”€ Screen: Homepage with value proposition
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Hero: "Stop searching. Start knowing."
â”‚   â”œâ”€â”€ Sample prediction card (demo route)
â”‚   â”œâ”€â”€ Intent declaration bar (prominent)
â”‚   â””â”€â”€ Social proof (savings stats)
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Enter destination in intent bar â†’ STEP 2
â”‚   â”œâ”€â”€ [B] Click "See how it works" â†’ Explainer modal
â”‚   â””â”€â”€ [C] Scroll for more info â†’ Extended landing
â””â”€â”€ Exit Points: Bounce (track in analytics)

<span class="code-key">STEP 2: Intent Declaration</span>
â”œâ”€â”€ Screen: Autocomplete dropdown active
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Real-time destination suggestions
â”‚   â”œâ”€â”€ Price preview per suggestion (!)
â”‚   â””â”€â”€ "VAYA predicts: $X" inline
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Select destination â†’ STEP 3
â”‚   â”œâ”€â”€ [B] Continue typing â†’ Refine suggestions
â”‚   â””â”€â”€ [C] Click outside â†’ Collapse, stay on page
â””â”€â”€ API Call: GET /api/v1/destinations/autocomplete?q={query}

<span class="code-key">STEP 3: Date Selection</span>
â”œâ”€â”€ Screen: Date picker with price intelligence
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Calendar with price per date
â”‚   â”œâ”€â”€ Color coding (green=cheap, red=expensive)
â”‚   â”œâ”€â”€ "â˜… VAYA Recommended" badges on best dates
â”‚   â””â”€â”€ Return date picker (if round trip)
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Select dates â†’ STEP 4
â”‚   â”œâ”€â”€ [B] Change month â†’ Update prices
â”‚   â””â”€â”€ [C] Toggle one-way/round-trip â†’ Update UI
â””â”€â”€ API Call: GET /api/v1/prices/calendar?route={}&month={}

<span class="code-key">STEP 4: Prediction Display</span>
â”œâ”€â”€ Screen: Full Oracle prediction card
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Current price vs predicted price
â”‚   â”œâ”€â”€ Directive: WAIT / BOOK_NOW / BOOK_URGENT
â”‚   â”œâ”€â”€ Reasoning ("WHY" section)
â”‚   â”œâ”€â”€ Confidence score
â”‚   â””â”€â”€ Price history chart
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Follow directive (WAIT) â†’ Set alert â†’ STEP 5A
â”‚   â”œâ”€â”€ [B] Follow directive (BOOK) â†’ STEP 6
â”‚   â”œâ”€â”€ [C] Ignore directive, book anyway â†’ STEP 6
â”‚   â””â”€â”€ [D] Change dates/route â†’ STEP 2
â””â”€â”€ API Call: GET /api/v1/predictions?origin={}&dest={}&date={}

<span class="code-key">STEP 5A: Wait Flow (if directive = WAIT)</span>
â”œâ”€â”€ Screen: Alert setup confirmation
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ "We'll notify you in X days"
â”‚   â”œâ”€â”€ Email/push preference toggles
â”‚   â”œâ”€â”€ Account creation prompt (if anonymous)
â”‚   â””â”€â”€ "Add to calendar" option
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Confirm alert (logged in) â†’ Dashboard
â”‚   â”œâ”€â”€ [B] Create account â†’ Account creation flow â†’ Dashboard
â”‚   â””â”€â”€ [C] Dismiss â†’ Return to prediction
â””â”€â”€ API Call: POST /api/v1/alerts (requires auth)

<span class="code-key">STEP 6: Flight Selection</span>
â”œâ”€â”€ Screen: Recommended flight + alternatives
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ PRIMARY: Recommended flight (prominent)
â”‚   â”œâ”€â”€ SECONDARY: "Why not these" alternatives (collapsed)
â”‚   â”œâ”€â”€ Flight details (times, duration, airline)
â”‚   â””â”€â”€ Price breakdown
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Select recommended â†’ STEP 7
â”‚   â”œâ”€â”€ [B] Expand alternatives â†’ Show with "why not" reasons
â”‚   â”œâ”€â”€ [C] Select alternative â†’ STEP 7
â”‚   â””â”€â”€ [D] Back â†’ STEP 4
â””â”€â”€ API Call: GET /api/v1/flights?route={}&date={}

<span class="code-key">STEP 7: Passenger Details</span>
â”œâ”€â”€ Screen: Passenger information form
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Passenger name fields (per airline requirements)
â”‚   â”œâ”€â”€ Contact information
â”‚   â”œâ”€â”€ Passport/ID if international
â”‚   â”œâ”€â”€ Seat preferences (if available)
â”‚   â””â”€â”€ Account creation (if anonymous)
â”œâ”€â”€ Validation Rules:
â”‚   â”œâ”€â”€ Name: 2-30 chars, letters/hyphens only
â”‚   â”œâ”€â”€ Email: Valid format, required
â”‚   â”œâ”€â”€ Phone: Valid format with country code
â”‚   â””â”€â”€ Passport: Valid format if required
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Submit valid form â†’ STEP 8
â”‚   â”œâ”€â”€ [B] Validation error â†’ Show inline errors
â”‚   â””â”€â”€ [C] Back â†’ STEP 6
â””â”€â”€ State: Form data persisted locally

<span class="code-key">STEP 8: Payment</span>
â”œâ”€â”€ Screen: Payment form with Stripe Elements
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Booking summary (flight + price)
â”‚   â”œâ”€â”€ Card input (Stripe Elements)
â”‚   â”œâ”€â”€ Saved cards (if logged in)
â”‚   â”œâ”€â”€ Price guarantee messaging
â”‚   â””â”€â”€ Terms acceptance checkbox
â”œâ”€â”€ Security: PCI DSS compliant (Stripe handles card data)
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Submit payment â†’ STEP 9 (loading)
â”‚   â”œâ”€â”€ [B] Payment fails â†’ Show error, retry
â”‚   â”œâ”€â”€ [C] Back â†’ STEP 7
â”‚   â””â”€â”€ [D] Close/abandon â†’ Abandoned cart tracking
â””â”€â”€ API Call: POST /api/v1/bookings

<span class="code-key">STEP 9: Confirmation</span>
â”œâ”€â”€ Screen: Booking confirmation
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Success message: "You're going to [destination]!"
â”‚   â”œâ”€â”€ Booking reference: VAYA-XXX-XXXX
â”‚   â”œâ”€â”€ Savings callout: "You saved $X"
â”‚   â”œâ”€â”€ Flight details summary
â”‚   â”œâ”€â”€ Add to calendar buttons
â”‚   â””â”€â”€ Share savings prompt
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Add to calendar â†’ Calendar integration
â”‚   â”œâ”€â”€ [B] Share â†’ Social share modal
â”‚   â”œâ”€â”€ [C] View booking â†’ Dashboard
â”‚   â””â”€â”€ [D] Book another â†’ STEP 1
â””â”€â”€ Side Effects: Confirmation email sent
                        </pre>
                    </div>
                </div>

                <h3>7.2 Demand Pool Journey</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">User â†’ Join Pool â†’ Book via Pool</span>
                        <span class="spec-block-id">JOUR-POOL</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-key">STEP 1: Pool Discovery</span>
â”œâ”€â”€ Trigger: User views prediction for route with active pool
â”œâ”€â”€ Screen: Prediction card + Pool card
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Standard prediction (above)
â”‚   â”œâ”€â”€ Pool card: "2,847 travelers want this route"
â”‚   â”œâ”€â”€ Progress bar to activation
â”‚   â”œâ”€â”€ Expected pool price vs individual price
â”‚   â””â”€â”€ "Join Pool" CTA
â””â”€â”€ Decision Point: Individual booking OR pool

<span class="code-key">STEP 2: Pool Join</span>
â”œâ”€â”€ Screen: Pool details modal
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Pool details (route, dates, members)
â”‚   â”œâ”€â”€ Expected savings breakdown
â”‚   â”œâ”€â”€ "No commitment until price confirmed"
â”‚   â”œâ”€â”€ Max price input (optional)
â”‚   â””â”€â”€ Confirmation button
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Confirm join â†’ STEP 3
â”‚   â””â”€â”€ [B] Cancel â†’ Return to prediction
â””â”€â”€ API Call: POST /api/v1/pools/{id}/join

<span class="code-key">STEP 3: Pool Membership</span>
â”œâ”€â”€ Screen: Pool membership confirmation
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ "You're in! Pool position secured."
â”‚   â”œâ”€â”€ Current pool status
â”‚   â”œâ”€â”€ Estimated activation date
â”‚   â””â”€â”€ Notification preferences
â”œâ”€â”€ Ongoing: User receives pool updates
â””â”€â”€ Dashboard: Pool appears in "My Pools"

<span class="code-key">STEP 4: Pool Activation (async)</span>
â”œâ”€â”€ Trigger: Pool reaches activation threshold
â”œâ”€â”€ Notification: Push + Email
â”œâ”€â”€ Screen: Pool activated card
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ "Airlines are now bidding!"
â”‚   â”œâ”€â”€ Bidding window countdown
â”‚   â””â”€â”€ "We'll notify you when bids arrive"
â””â”€â”€ User Action: Wait for bids

<span class="code-key">STEP 5: Bid Review</span>
â”œâ”€â”€ Trigger: Bidding window closed
â”œâ”€â”€ Notification: Push + Email with best bid
â”œâ”€â”€ Screen: Airline bids display
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Ranked bids (price, airline, details)
â”‚   â”œâ”€â”€ Comparison to individual price
â”‚   â”œâ”€â”€ 24h confirmation window countdown
â”‚   â””â”€â”€ "Confirm" / "Decline" buttons
â”œâ”€â”€ User Actions:
â”‚   â”œâ”€â”€ [A] Confirm bid â†’ STEP 6
â”‚   â”œâ”€â”€ [B] Decline â†’ Exit pool, no charge
â”‚   â””â”€â”€ [C] No action in 24h â†’ Auto-decline
â””â”€â”€ API Call: POST /api/v1/pools/{id}/confirm-bid

<span class="code-key">STEP 6: Pool Booking</span>
â”œâ”€â”€ Screen: Streamlined booking (pre-filled from pool)
â”œâ”€â”€ Key Elements:
â”‚   â”œâ”€â”€ Confirmed bid price
â”‚   â”œâ”€â”€ Passenger details (from profile if available)
â”‚   â”œâ”€â”€ Payment
â”‚   â””â”€â”€ Pool savings highlighted
â”œâ”€â”€ Flow: Same as STEP 7-9 of standard booking
â””â”€â”€ Difference: Price guaranteed from bid
                        </pre>
                    </div>
                </div>
            </section>

            <!-- Section 10: Security Architecture -->
            <section id="security">
                <div class="section-header">
                    <div class="section-id">Section 10</div>
                    <h2>Security Architecture</h2>
                    <p class="section-desc">
                        Complete security model. Authentication, authorization, data protection.
                        No security decisions left to interpretation.
                    </p>
                </div>

                <div class="alert alert-danger">
                    <h5>â›” SECURITY IS NON-NEGOTIABLE</h5>
                    <p>Any deviation from these specifications requires explicit security review and sign-off. 
                    No shortcuts. No "we'll fix it later."</p>
                </div>

                <h3>10.1 Authentication</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Authentication Specification</span>
                        <span class="spec-block-id">SEC-AUTH</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Specification</th>
                                    <th>Rationale</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Password Hashing</td>
                                    <td>Argon2id, memory=64MB, iterations=3, parallelism=4</td>
                                    <td>OWASP recommended, memory-hard</td>
                                </tr>
                                <tr>
                                    <td>Password Requirements</td>
                                    <td>Min 10 chars, no complexity rules, check HaveIBeenPwned</td>
                                    <td>NIST 800-63B guidelines</td>
                                </tr>
                                <tr>
                                    <td>Access Token</td>
                                    <td>JWT, RS256, 1 hour expiry</td>
                                    <td>Short-lived, asymmetric signing</td>
                                </tr>
                                <tr>
                                    <td>Refresh Token</td>
                                    <td>Opaque token, 30 day expiry, stored hashed in DB</td>
                                    <td>Rotation on use, revocable</td>
                                </tr>
                                <tr>
                                    <td>Session Storage</td>
                                    <td>HttpOnly, Secure, SameSite=Strict cookies</td>
                                    <td>XSS/CSRF protection</td>
                                </tr>
                                <tr>
                                    <td>MFA</td>
                                    <td>TOTP (Google Authenticator compatible), optional</td>
                                    <td>Required for ATA (auto-booking)</td>
                                </tr>
                                <tr>
                                    <td>OAuth Providers</td>
                                    <td>Google, Apple Sign-In</td>
                                    <td>Reduced password fatigue</td>
                                </tr>
                                <tr>
                                    <td>Rate Limiting (Login)</td>
                                    <td>5 attempts per 15 min per email, exponential backoff</td>
                                    <td>Brute force protection</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>10.2 Authorization</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Permission Matrix</span>
                        <span class="spec-block-id">SEC-AUTHZ</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Action</th>
                                    <th>Anonymous</th>
                                    <th>Registered</th>
                                    <th>Premium</th>
                                    <th>Admin</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>View predictions</td>
                                    <td>âœ“ (limited)</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Set price alerts</td>
                                    <td>âœ—</td>
                                    <td>âœ“ (5 max)</td>
                                    <td>âœ“ (unlimited)</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Join demand pools</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>âœ“ (priority)</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Book flights</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Use ATA (auto-book)</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Access API</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>View all users</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                </tr>
                                <tr>
                                    <td>Modify predictions</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>10.3 Data Protection</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Data Classification & Handling</span>
                        <span class="spec-block-id">SEC-DATA</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Data Type</th>
                                    <th>Classification</th>
                                    <th>Encryption at Rest</th>
                                    <th>Encryption in Transit</th>
                                    <th>Retention</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Passwords</td>
                                    <td>SECRET</td>
                                    <td>Argon2id hash only</td>
                                    <td>TLS 1.3</td>
                                    <td>Until account deletion</td>
                                </tr>
                                <tr>
                                    <td>Payment data</td>
                                    <td>SECRET</td>
                                    <td>Stripe handles (PCI DSS)</td>
                                    <td>TLS 1.3</td>
                                    <td>Token only, no card data</td>
                                </tr>
                                <tr>
                                    <td>Passport numbers</td>
                                    <td>CONFIDENTIAL</td>
                                    <td>AES-256-GCM</td>
                                    <td>TLS 1.3</td>
                                    <td>90 days post-travel</td>
                                </tr>
                                <tr>
                                    <td>Email addresses</td>
                                    <td>INTERNAL</td>
                                    <td>AES-256-GCM</td>
                                    <td>TLS 1.3</td>
                                    <td>Until account deletion</td>
                                </tr>
                                <tr>
                                    <td>Booking history</td>
                                    <td>INTERNAL</td>
                                    <td>AES-256-GCM</td>
                                    <td>TLS 1.3</td>
                                    <td>7 years (legal requirement)</td>
                                </tr>
                                <tr>
                                    <td>Search history</td>
                                    <td>INTERNAL</td>
                                    <td>Not encrypted</td>
                                    <td>TLS 1.3</td>
                                    <td>2 years</td>
                                </tr>
                                <tr>
                                    <td>Price data</td>
                                    <td>PUBLIC</td>
                                    <td>Not encrypted</td>
                                    <td>TLS 1.3</td>
                                    <td>Indefinite</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>10.4 API Security</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">API Security Controls</span>
                        <span class="spec-block-id">SEC-API</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Control</th>
                                    <th>Implementation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Rate Limiting</td>
                                    <td>100 req/min anonymous, 1000 req/min authenticated, per IP/user</td>
                                </tr>
                                <tr>
                                    <td>Request Size Limit</td>
                                    <td>1MB max body size</td>
                                </tr>
                                <tr>
                                    <td>Input Validation</td>
                                    <td>JSON Schema validation on all endpoints</td>
                                </tr>
                                <tr>
                                    <td>SQL Injection</td>
                                    <td>Parameterized queries only, no string concatenation</td>
                                </tr>
                                <tr>
                                    <td>XSS Prevention</td>
                                    <td>Output encoding, CSP headers, no inline scripts</td>
                                </tr>
                                <tr>
                                    <td>CSRF Protection</td>
                                    <td>SameSite cookies + CSRF tokens for state-changing ops</td>
                                </tr>
                                <tr>
                                    <td>CORS</td>
                                    <td>Whitelist: vaya.app, *.vaya.app only</td>
                                </tr>
                                <tr>
                                    <td>Security Headers</td>
                                    <td>HSTS, X-Frame-Options, X-Content-Type-Options, CSP</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 8: Error Handling -->
            <section id="error-handling">
                <div class="section-header">
                    <div class="section-id">Section 08</div>
                    <h2>Error Handling</h2>
                    <p class="section-desc">
                        Every possible error state, how to detect it, and how to recover.
                        No unhandled exceptions. No cryptic messages.
                    </p>
                </div>

                <div class="alert alert-danger">
                    <h5>âš ï¸ CRITICAL: Generic Error Messages = User Abandonment</h5>
                    <p>Every error MUST have: (1) Clear explanation of what went wrong, 
                    (2) What the user can do about it, (3) How to get help if they can't fix it.</p>
                </div>

                <h3>8.1 Error Message Patterns</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">User-Facing Error Copy</span>
                        <span class="spec-block-id">ERR-COPY</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Error Type</th>
                                    <th>Headline</th>
                                    <th>Body Copy</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Network Offline</td>
                                    <td>"No internet connection"</td>
                                    <td>"Check your connection and try again. Your search will resume automatically when you're back online."</td>
                                    <td>"Try Again" button</td>
                                </tr>
                                <tr>
                                    <td>Session Expired</td>
                                    <td>"Session expired"</td>
                                    <td>"For your security, you've been logged out. Sign in again to continue."</td>
                                    <td>"Sign In" button</td>
                                </tr>
                                <tr>
                                    <td>Payment Failed</td>
                                    <td>"Payment couldn't be processed"</td>
                                    <td>"Your card was declined. Please check your card details or try a different payment method."</td>
                                    <td>"Try Different Card" button</td>
                                </tr>
                                <tr>
                                    <td>Booking Expired</td>
                                    <td>"Hold expired"</td>
                                    <td>"Your price hold has expired. Prices may have changed. Search again to see current options."</td>
                                    <td>"Search Again" button</td>
                                </tr>
                                <tr>
                                    <td>Route Not Available</td>
                                    <td>"No flights available"</td>
                                    <td>"We couldn't find flights for these dates. Try different dates or nearby airports."</td>
                                    <td>"Explore Options" button</td>
                                </tr>
                                <tr>
                                    <td>Server Error</td>
                                    <td>"Something went wrong"</td>
                                    <td>"We're having technical difficulties. Our team has been notified. Please try again in a few minutes."</td>
                                    <td>"Try Again" + "Contact Support" buttons</td>
                                </tr>
                                <tr>
                                    <td>Prediction Unavailable</td>
                                    <td>"Prediction temporarily unavailable"</td>
                                    <td>"We don't have enough data for this route yet. Try a more popular route or check back later."</td>
                                    <td>"Explore Popular Routes" button</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>8.2 Recovery Flows</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Automatic Recovery Behaviors</span>
                        <span class="spec-block-id">ERR-RECOVERY</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Scenario</th>
                                    <th>Auto-Recovery Action</th>
                                    <th>Max Retries</th>
                                    <th>Backoff</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>API timeout (>5s)</td>
                                    <td>Retry request</td>
                                    <td>3</td>
                                    <td>Exponential (1s, 2s, 4s)</td>
                                </tr>
                                <tr>
                                    <td>Network offline detected</td>
                                    <td>Queue request, retry when online</td>
                                    <td>âˆž (until online)</td>
                                    <td>Check every 3s</td>
                                </tr>
                                <tr>
                                    <td>401 Unauthorized</td>
                                    <td>Attempt token refresh, retry</td>
                                    <td>1</td>
                                    <td>Immediate</td>
                                </tr>
                                <tr>
                                    <td>429 Rate Limited</td>
                                    <td>Wait for Retry-After header, retry</td>
                                    <td>3</td>
                                    <td>Per Retry-After</td>
                                </tr>
                                <tr>
                                    <td>5xx Server Error</td>
                                    <td>Retry request</td>
                                    <td>2</td>
                                    <td>2s, 5s</td>
                                </tr>
                                <tr>
                                    <td>Price changed during booking</td>
                                    <td>Show new price, ask for confirmation</td>
                                    <td>N/A</td>
                                    <td>N/A</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 9: Edge Cases -->
            <section id="edge-cases">
                <div class="section-header">
                    <div class="section-id">Section 09</div>
                    <h2>Edge Cases</h2>
                    <p class="section-desc">
                        Every boundary condition documented. What happens at the extremes.
                        These WILL occur in production. Handle them.
                    </p>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Search & Prediction Edge Cases</span>
                        <span class="spec-block-id">EDGE-SEARCH</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Edge Case</th>
                                    <th>Expected Behavior</th>
                                    <th>UI Response</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Departure date in the past</td>
                                    <td>Reject with validation error</td>
                                    <td>"Please select a future date"</td>
                                </tr>
                                <tr>
                                    <td>Departure date >365 days out</td>
                                    <td>Accept but warn low confidence</td>
                                    <td>"Predictions this far out are less reliable"</td>
                                </tr>
                                <tr>
                                    <td>Same origin and destination</td>
                                    <td>Reject with validation error</td>
                                    <td>"Origin and destination cannot be the same"</td>
                                </tr>
                                <tr>
                                    <td>Invalid IATA code</td>
                                    <td>Show "not found" in autocomplete</td>
                                    <td>"No airports found for '[query]'"</td>
                                </tr>
                                <tr>
                                    <td>Route with no historical data</td>
                                    <td>Return prediction with low confidence (&lt;50%)</td>
                                    <td>Show prediction but warn "Limited data available"</td>
                                </tr>
                                <tr>
                                    <td>Route that doesn't exist (no airline flies it)</td>
                                    <td>Suggest synthetic routes or nearby airports</td>
                                    <td>"No direct flights. Here are alternatives..."</td>
                                </tr>
                                <tr>
                                    <td>User searches while prediction is loading</td>
                                    <td>Cancel previous request, start new one</td>
                                    <td>Show loading state, no stacking</td>
                                </tr>
                                <tr>
                                    <td>Prediction expires while user is viewing</td>
                                    <td>Auto-refresh if tab is active</td>
                                    <td>Subtle refresh indicator, no jarring change</td>
                                </tr>
                                <tr>
                                    <td>10 passengers requested</td>
                                    <td>Reject with validation error</td>
                                    <td>"Maximum 9 passengers per booking. For groups, contact support."</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Booking Edge Cases</span>
                        <span class="spec-block-id">EDGE-BOOKING</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Edge Case</th>
                                    <th>Expected Behavior</th>
                                    <th>UI Response</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Price increases during checkout</td>
                                    <td>Show new price, require re-confirmation</td>
                                    <td>"Price has changed to $X. Continue?"</td>
                                </tr>
                                <tr>
                                    <td>Price decreases during checkout</td>
                                    <td>Auto-apply lower price, notify user</td>
                                    <td>"Good news! Price dropped to $X"</td>
                                </tr>
                                <tr>
                                    <td>Flight sells out during checkout</td>
                                    <td>Offer alternatives or waitlist</td>
                                    <td>"This flight just sold out. Here are similar options..."</td>
                                </tr>
                                <tr>
                                    <td>Payment timeout (>30s)</td>
                                    <td>Cancel transaction, refund if charged</td>
                                    <td>"Payment timed out. You have not been charged."</td>
                                </tr>
                                <tr>
                                    <td>Duplicate booking attempt</td>
                                    <td>Detect and prevent, show existing booking</td>
                                    <td>"You already have a booking for this flight."</td>
                                </tr>
                                <tr>
                                    <td>User closes tab during booking</td>
                                    <td>Complete transaction if past point-of-no-return</td>
                                    <td>Send confirmation email regardless</td>
                                </tr>
                                <tr>
                                    <td>Airline system down</td>
                                    <td>Retry up to 3x, then offer to hold and notify</td>
                                    <td>"Airline systems are slow. We'll hold this price and notify you."</td>
                                </tr>
                                <tr>
                                    <td>Passenger name too long (&gt;30 chars)</td>
                                    <td>Truncate per airline rules, warn user</td>
                                    <td>"Name will appear as '[truncated]' on ticket"</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Demand Pool Edge Cases</span>
                        <span class="spec-block-id">EDGE-POOL</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Edge Case</th>
                                    <th>Expected Behavior</th>
                                    <th>UI Response</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Pool expires before activation</td>
                                    <td>Notify all members, dissolve pool</td>
                                    <td>"Pool didn't reach enough members. No charges made."</td>
                                </tr>
                                <tr>
                                    <td>User tries to join same pool twice</td>
                                    <td>Prevent, show existing membership</td>
                                    <td>"You're already in this pool!"</td>
                                </tr>
                                <tr>
                                    <td>User in pool cancels membership</td>
                                    <td>Remove from pool, adjust count</td>
                                    <td>"You've left the pool. No charges."</td>
                                </tr>
                                <tr>
                                    <td>Pool activates but airline won't bid</td>
                                    <td>Extended bidding window, notify members</td>
                                    <td>"Airlines reviewing. We'll update within 48h."</td>
                                </tr>
                                <tr>
                                    <td>No bids received after activation</td>
                                    <td>Offer standard booking at current rates</td>
                                    <td>"No group rates available. Book at individual rates?"</td>
                                </tr>
                                <tr>
                                    <td>User's max price below all bids</td>
                                    <td>Notify, offer option to increase budget</td>
                                    <td>"Best bid is $X, above your $Y budget. Adjust?"</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 11: Performance Requirements -->
            <section id="performance">
                <div class="section-header">
                    <div class="section-id">Section 11</div>
                    <h2>Performance Requirements</h2>
                    <p class="section-desc">
                        Exact performance targets. Not aspirational. Mandatory. 
                        Features shipping below these thresholds are bugs.
                    </p>
                </div>

                <h3>11.1 Frontend Performance</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Core Web Vitals Targets</span>
                        <span class="spec-block-id">PERF-CWV</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Target</th>
                                    <th>Max Acceptable</th>
                                    <th>Measurement</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Largest Contentful Paint (LCP)</td>
                                    <td>&lt;2.5s</td>
                                    <td>&lt;4.0s</td>
                                    <td>p75 of real user data</td>
                                </tr>
                                <tr>
                                    <td>First Input Delay (FID)</td>
                                    <td>&lt;100ms</td>
                                    <td>&lt;300ms</td>
                                    <td>p75 of real user data</td>
                                </tr>
                                <tr>
                                    <td>Cumulative Layout Shift (CLS)</td>
                                    <td>&lt;0.1</td>
                                    <td>&lt;0.25</td>
                                    <td>p75 of real user data</td>
                                </tr>
                                <tr>
                                    <td>Time to First Byte (TTFB)</td>
                                    <td>&lt;200ms</td>
                                    <td>&lt;600ms</td>
                                    <td>p75 of real user data</td>
                                </tr>
                                <tr>
                                    <td>First Contentful Paint (FCP)</td>
                                    <td>&lt;1.8s</td>
                                    <td>&lt;3.0s</td>
                                    <td>p75 of real user data</td>
                                </tr>
                                <tr>
                                    <td>Time to Interactive (TTI)</td>
                                    <td>&lt;3.5s</td>
                                    <td>&lt;7.0s</td>
                                    <td>Lighthouse lab test</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>11.2 Bundle Size Limits</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">JavaScript/CSS Budgets</span>
                        <span class="spec-block-id">PERF-BUNDLE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Bundle</th>
                                    <th>Max Size (gzipped)</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Initial JS (critical path)</td>
                                    <td>150KB</td>
                                    <td>Blocks rendering, must be minimal</td>
                                </tr>
                                <tr>
                                    <td>Total JS (all chunks)</td>
                                    <td>500KB</td>
                                    <td>Lazy-loaded acceptable</td>
                                </tr>
                                <tr>
                                    <td>Initial CSS</td>
                                    <td>50KB</td>
                                    <td>Critical CSS inlined</td>
                                </tr>
                                <tr>
                                    <td>Total CSS</td>
                                    <td>100KB</td>
                                    <td>Including lazy-loaded</td>
                                </tr>
                                <tr>
                                    <td>Fonts</td>
                                    <td>100KB</td>
                                    <td>Subset to used glyphs</td>
                                </tr>
                                <tr>
                                    <td>Images (above fold)</td>
                                    <td>200KB</td>
                                    <td>WebP/AVIF required</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>11.3 Backend Performance</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">API Response Time Targets</span>
                        <span class="spec-block-id">PERF-API</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Endpoint Category</th>
                                    <th>p50 Target</th>
                                    <th>p99 Target</th>
                                    <th>Timeout</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Authentication</td>
                                    <td>&lt;100ms</td>
                                    <td>&lt;300ms</td>
                                    <td>5s</td>
                                </tr>
                                <tr>
                                    <td>Autocomplete</td>
                                    <td>&lt;50ms</td>
                                    <td>&lt;150ms</td>
                                    <td>2s</td>
                                </tr>
                                <tr>
                                    <td>Price Calendar</td>
                                    <td>&lt;200ms</td>
                                    <td>&lt;500ms</td>
                                    <td>5s</td>
                                </tr>
                                <tr>
                                    <td>Prediction Generation</td>
                                    <td>&lt;300ms</td>
                                    <td>&lt;1000ms</td>
                                    <td>10s</td>
                                </tr>
                                <tr>
                                    <td>Flight Search</td>
                                    <td>&lt;500ms</td>
                                    <td>&lt;2000ms</td>
                                    <td>30s</td>
                                </tr>
                                <tr>
                                    <td>Booking Creation</td>
                                    <td>&lt;1000ms</td>
                                    <td>&lt;5000ms</td>
                                    <td>60s</td>
                                </tr>
                                <tr>
                                    <td>User Profile</td>
                                    <td>&lt;100ms</td>
                                    <td>&lt;300ms</td>
                                    <td>5s</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 12: Testing Strategy -->
            <section id="testing" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 12</div>
                    <h2>Testing Strategy</h2>
                    <p class="section-desc">
                        What gets tested, how, and what coverage is required.
                        No "we'll add tests later."
                    </p>
                </div>

                <h3>12.1 Coverage Requirements</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Minimum Coverage by Layer</span>
                        <span class="spec-block-id">TEST-COV</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Layer</th>
                                    <th>Unit Test Coverage</th>
                                    <th>Integration Coverage</th>
                                    <th>E2E Coverage</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Business Logic / Domain</td>
                                    <td>90%</td>
                                    <td>80%</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>API Endpoints</td>
                                    <td>80%</td>
                                    <td>100% (all endpoints)</td>
                                    <td>Critical paths</td>
                                </tr>
                                <tr>
                                    <td>ML Models</td>
                                    <td>70%</td>
                                    <td>100% (inference pipeline)</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Database Queries</td>
                                    <td>N/A</td>
                                    <td>100% (all queries)</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>UI Components</td>
                                    <td>80%</td>
                                    <td>N/A</td>
                                    <td>Visual regression</td>
                                </tr>
                                <tr>
                                    <td>User Journeys</td>
                                    <td>N/A</td>
                                    <td>N/A</td>
                                    <td>100% (all primary flows)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>12.2 Critical Test Scenarios</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Must-Pass E2E Tests</span>
                        <span class="spec-block-id">TEST-E2E</span>
                    </div>
                    <div class="spec-block-body">
                        <ul class="checklist">
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>New User Registration â†’ First Booking</h5>
                                    <p>Complete flow from landing to confirmation email received.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Prediction Display with All States</h5>
                                    <p>WAIT directive, BOOK_NOW directive, BOOK_URGENT, low confidence, error state.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Payment Flow (Success + Failure)</h5>
                                    <p>Successful charge, declined card, 3DS challenge, timeout.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Demand Pool Lifecycle</h5>
                                    <p>Join pool, pool activates, bid received, confirm booking.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Alert Delivery</h5>
                                    <p>Price drop triggers push + email within 60 seconds.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Session Management</h5>
                                    <p>Login, logout, token refresh, session timeout, concurrent sessions.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 13: Accessibility -->
            <section id="accessibility">
                <div class="section-header">
                    <div class="section-id">Section 13</div>
                    <h2>Accessibility (WCAG 2.1 AA)</h2>
                    <p class="section-desc">
                        VAYA must be usable by everyone. Not optional. Legal requirement in many jurisdictions.
                    </p>
                </div>

                <h3>13.1 WCAG 2.1 AA Compliance</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Required Accessibility Features</span>
                        <span class="spec-block-id">A11Y-REQ</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Requirement</th>
                                    <th>Implementation</th>
                                    <th>Testing Method</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Color Contrast</td>
                                    <td>4.5:1 for normal text, 3:1 for large text</td>
                                    <td>Axe, Lighthouse</td>
                                </tr>
                                <tr>
                                    <td>Keyboard Navigation</td>
                                    <td>All interactive elements focusable, logical tab order</td>
                                    <td>Manual testing</td>
                                </tr>
                                <tr>
                                    <td>Screen Reader</td>
                                    <td>Semantic HTML, ARIA labels, live regions for updates</td>
                                    <td>VoiceOver, NVDA testing</td>
                                </tr>
                                <tr>
                                    <td>Focus Indicators</td>
                                    <td>Visible focus ring on all interactive elements</td>
                                    <td>Visual inspection</td>
                                </tr>
                                <tr>
                                    <td>Text Scaling</td>
                                    <td>Readable at 200% zoom, no horizontal scroll</td>
                                    <td>Browser zoom testing</td>
                                </tr>
                                <tr>
                                    <td>Motion</td>
                                    <td>Respect prefers-reduced-motion, pause animations</td>
                                    <td>OS setting toggle</td>
                                </tr>
                                <tr>
                                    <td>Form Labels</td>
                                    <td>All inputs have associated labels, error messages linked</td>
                                    <td>Axe, manual</td>
                                </tr>
                                <tr>
                                    <td>Alt Text</td>
                                    <td>All images have descriptive alt text or role="presentation"</td>
                                    <td>Axe, manual</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 14: Internationalization -->
            <section id="i18n" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 14</div>
                    <h2>Internationalization (i18n)</h2>
                    <p class="section-desc">
                        Multi-language, multi-currency, multi-locale support specifications.
                    </p>
                </div>

                <h3>14.1 Supported Locales (MVP)</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Launch Locales</span>
                        <span class="spec-block-id">I18N-LOCALE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Locale</th>
                                    <th>Language</th>
                                    <th>Currency</th>
                                    <th>Date Format</th>
                                    <th>Number Format</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>en-MY</td>
                                    <td>English (Malaysia)</td>
                                    <td>MYR (RM)</td>
                                    <td>DD/MM/YYYY</td>
                                    <td>1,234.56</td>
                                </tr>
                                <tr>
                                    <td>en-SG</td>
                                    <td>English (Singapore)</td>
                                    <td>SGD (S$)</td>
                                    <td>DD/MM/YYYY</td>
                                    <td>1,234.56</td>
                                </tr>
                                <tr>
                                    <td>en-US</td>
                                    <td>English (US)</td>
                                    <td>USD ($)</td>
                                    <td>MM/DD/YYYY</td>
                                    <td>1,234.56</td>
                                </tr>
                                <tr>
                                    <td>ms-MY</td>
                                    <td>Bahasa Malaysia</td>
                                    <td>MYR (RM)</td>
                                    <td>DD/MM/YYYY</td>
                                    <td>1.234,56</td>
                                </tr>
                                <tr>
                                    <td>zh-CN</td>
                                    <td>Simplified Chinese</td>
                                    <td>CNY (Â¥)</td>
                                    <td>YYYY/MM/DD</td>
                                    <td>1,234.56</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>14.2 String Management</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">i18n Implementation Rules</span>
                        <span class="spec-block-id">I18N-IMPL</span>
                    </div>
                    <div class="spec-block-body">
                        <ul class="checklist">
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>No Hardcoded Strings</h5>
                                    <p>ALL user-facing text must use translation keys. No exceptions.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>ICU Message Format</h5>
                                    <p>Use ICU for pluralization, gender, select. Example: {count, plural, one {# flight} other {# flights}}</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Date/Time via Intl API</h5>
                                    <p>Use Intl.DateTimeFormat, never manual formatting.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Currency via Intl API</h5>
                                    <p>Use Intl.NumberFormat with currency style.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>RTL Support Ready</h5>
                                    <p>Use logical CSS properties (margin-inline-start vs margin-left).</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 15: Analytics & Tracking -->
            <section id="analytics">
                <div class="section-header">
                    <div class="section-id">Section 15</div>
                    <h2>Analytics & Tracking</h2>
                    <p class="section-desc">
                        What we measure, how we track it, and privacy considerations.
                    </p>
                </div>

                <h3>15.1 Event Taxonomy</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Core Events</span>
                        <span class="spec-block-id">ANA-EVENTS</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Event Name</th>
                                    <th>Trigger</th>
                                    <th>Properties</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>page_view</code></td>
                                    <td>Page load / route change</td>
                                    <td>page_path, page_title, referrer</td>
                                </tr>
                                <tr>
                                    <td><code>search_initiated</code></td>
                                    <td>User starts typing destination</td>
                                    <td>origin, is_logged_in</td>
                                </tr>
                                <tr>
                                    <td><code>destination_selected</code></td>
                                    <td>User selects from autocomplete</td>
                                    <td>origin, destination, position_in_list</td>
                                </tr>
                                <tr>
                                    <td><code>dates_selected</code></td>
                                    <td>User confirms date selection</td>
                                    <td>departure_date, return_date, days_out</td>
                                </tr>
                                <tr>
                                    <td><code>prediction_viewed</code></td>
                                    <td>Prediction card displayed</td>
                                    <td>route, directive, confidence, price</td>
                                </tr>
                                <tr>
                                    <td><code>directive_followed</code></td>
                                    <td>User follows WAIT/BOOK recommendation</td>
                                    <td>directive, route, price</td>
                                </tr>
                                <tr>
                                    <td><code>directive_ignored</code></td>
                                    <td>User takes opposite action</td>
                                    <td>directive, route, price, action_taken</td>
                                </tr>
                                <tr>
                                    <td><code>booking_started</code></td>
                                    <td>User enters booking flow</td>
                                    <td>route, price, source (direct/pool)</td>
                                </tr>
                                <tr>
                                    <td><code>booking_completed</code></td>
                                    <td>Booking confirmed</td>
                                    <td>route, price, savings, source, passengers</td>
                                </tr>
                                <tr>
                                    <td><code>booking_abandoned</code></td>
                                    <td>User exits booking flow</td>
                                    <td>route, price, step_abandoned, time_in_flow</td>
                                </tr>
                                <tr>
                                    <td><code>pool_joined</code></td>
                                    <td>User joins demand pool</td>
                                    <td>pool_id, route, pool_size, expected_savings</td>
                                </tr>
                                <tr>
                                    <td><code>alert_created</code></td>
                                    <td>User sets price alert</td>
                                    <td>route, current_price, alert_type</td>
                                </tr>
                                <tr>
                                    <td><code>alert_triggered</code></td>
                                    <td>Alert sent to user</td>
                                    <td>route, trigger_price, channel</td>
                                </tr>
                                <tr>
                                    <td><code>signup_completed</code></td>
                                    <td>User creates account</td>
                                    <td>method (email/google/apple), source</td>
                                </tr>
                                <tr>
                                    <td><code>subscription_started</code></td>
                                    <td>User upgrades to premium</td>
                                    <td>plan, price, source</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>15.2 Analytics Tools</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Tracking Stack</span>
                        <span class="spec-block-id">ANA-STACK</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tool</th>
                                    <th>Purpose</th>
                                    <th>Data Sent</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Segment</td>
                                    <td>Event routing, CDP</td>
                                    <td>All events, user traits</td>
                                </tr>
                                <tr>
                                    <td>Amplitude</td>
                                    <td>Product analytics</td>
                                    <td>All events via Segment</td>
                                </tr>
                                <tr>
                                    <td>Google Analytics 4</td>
                                    <td>Marketing attribution</td>
                                    <td>Page views, conversions via Segment</td>
                                </tr>
                                <tr>
                                    <td>Mixpanel (backup)</td>
                                    <td>Funnel analysis</td>
                                    <td>Core events via Segment</td>
                                </tr>
                                <tr>
                                    <td>Hotjar</td>
                                    <td>Session recording, heatmaps</td>
                                    <td>User interactions (sampled)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 16: Notification System -->
            <section id="notifications" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 16</div>
                    <h2>Notification System</h2>
                    <p class="section-desc">
                        All notification types, channels, and delivery requirements.
                    </p>
                </div>

                <h3>16.1 Notification Types</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Notification Inventory</span>
                        <span class="spec-block-id">NOTIF-INV</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Notification</th>
                                    <th>Push</th>
                                    <th>Email</th>
                                    <th>SMS</th>
                                    <th>In-App</th>
                                    <th>Priority</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Price Drop Alert</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>Premium</td>
                                    <td>âœ“</td>
                                    <td>High</td>
                                </tr>
                                <tr>
                                    <td>Error Fare Alert</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>Premium</td>
                                    <td>âœ“</td>
                                    <td>Critical</td>
                                </tr>
                                <tr>
                                    <td>Wait Timer Complete</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>High</td>
                                </tr>
                                <tr>
                                    <td>Pool Update</td>
                                    <td>âœ“</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>Medium</td>
                                </tr>
                                <tr>
                                    <td>Pool Activated</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>High</td>
                                </tr>
                                <tr>
                                    <td>Booking Confirmation</td>
                                    <td>âœ“</td>
                                    <td>âœ“ (required)</td>
                                    <td>âœ—</td>
                                    <td>âœ“</td>
                                    <td>Critical</td>
                                </tr>
                                <tr>
                                    <td>Trip Reminder (24h)</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ—</td>
                                    <td>âœ—</td>
                                    <td>Medium</td>
                                </tr>
                                <tr>
                                    <td>Flight Disruption</td>
                                    <td>âœ“</td>
                                    <td>âœ“</td>
                                    <td>âœ“ (all)</td>
                                    <td>âœ“</td>
                                    <td>Critical</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>16.2 Delivery Requirements</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">SLA by Priority</span>
                        <span class="spec-block-id">NOTIF-SLA</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Priority</th>
                                    <th>Delivery Target</th>
                                    <th>Retry Policy</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Critical</td>
                                    <td>&lt;30 seconds</td>
                                    <td>5 retries, exponential backoff, then alert ops</td>
                                </tr>
                                <tr>
                                    <td>High</td>
                                    <td>&lt;2 minutes</td>
                                    <td>3 retries, exponential backoff</td>
                                </tr>
                                <tr>
                                    <td>Medium</td>
                                    <td>&lt;15 minutes</td>
                                    <td>2 retries</td>
                                </tr>
                                <tr>
                                    <td>Low</td>
                                    <td>&lt;1 hour</td>
                                    <td>1 retry, then drop</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 17: Admin Panel -->
            <section id="admin">
                <div class="section-header">
                    <div class="section-id">Section 17</div>
                    <h2>Admin Panel</h2>
                    <p class="section-desc">
                        Internal tools for operations, support, and management.
                    </p>
                </div>

                <h3>17.1 Admin Capabilities</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Admin Features</span>
                        <span class="spec-block-id">ADMIN-FEAT</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Description</th>
                                    <th>Access Level</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>User Management</td>
                                    <td>View/edit users, reset passwords, suspend accounts</td>
                                    <td>Support, Admin</td>
                                </tr>
                                <tr>
                                    <td>Booking Management</td>
                                    <td>View bookings, issue refunds, modify reservations</td>
                                    <td>Support, Admin</td>
                                </tr>
                                <tr>
                                    <td>Pool Management</td>
                                    <td>View/modify pools, force activation, manual bid entry</td>
                                    <td>Ops, Admin</td>
                                </tr>
                                <tr>
                                    <td>Prediction Override</td>
                                    <td>Manually adjust predictions, set confidence overrides</td>
                                    <td>Data Team, Admin</td>
                                </tr>
                                <tr>
                                    <td>Price Rules</td>
                                    <td>Modify markup rules, commission structures</td>
                                    <td>Finance, Admin</td>
                                </tr>
                                <tr>
                                    <td>Analytics Dashboard</td>
                                    <td>Real-time metrics, KPI tracking</td>
                                    <td>All internal</td>
                                </tr>
                                <tr>
                                    <td>System Health</td>
                                    <td>Service status, error rates, queue depths</td>
                                    <td>Engineering, Admin</td>
                                </tr>
                                <tr>
                                    <td>Feature Flags</td>
                                    <td>Toggle features, A/B test configuration</td>
                                    <td>Product, Engineering, Admin</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 18: Legal & Compliance -->
            <section id="legal" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 18</div>
                    <h2>Legal & Compliance</h2>
                    <p class="section-desc">
                        Regulatory requirements, data protection, and legal obligations.
                    </p>
                </div>

                <h3>18.1 Regulatory Compliance</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Required Compliance</span>
                        <span class="spec-block-id">LEGAL-REG</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Regulation</th>
                                    <th>Jurisdiction</th>
                                    <th>Key Requirements</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>PDPA</td>
                                    <td>Malaysia, Singapore</td>
                                    <td>Consent, purpose limitation, data access rights</td>
                                </tr>
                                <tr>
                                    <td>GDPR</td>
                                    <td>EU (if serving EU users)</td>
                                    <td>Consent, right to erasure, data portability</td>
                                </tr>
                                <tr>
                                    <td>PCI DSS</td>
                                    <td>Global</td>
                                    <td>Handled by Stripe (SAQ-A)</td>
                                </tr>
                                <tr>
                                    <td>Consumer Protection</td>
                                    <td>Malaysia</td>
                                    <td>Clear pricing, refund policies, no misleading claims</td>
                                </tr>
                                <tr>
                                    <td>Travel Agent Licensing</td>
                                    <td>Malaysia (MOTAC)</td>
                                    <td>License required if selling tickets directly</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>18.2 Required Legal Documents</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Legal Pages</span>
                        <span class="spec-block-id">LEGAL-DOCS</span>
                    </div>
                    <div class="spec-block-body">
                        <ul class="checklist">
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Terms of Service</h5>
                                    <p>Booking terms, liability limits, user obligations, dispute resolution.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Privacy Policy</h5>
                                    <p>Data collection, usage, sharing, retention, user rights.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Cookie Policy</h5>
                                    <p>Cookie types, purposes, third-party cookies, consent mechanism.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Refund Policy</h5>
                                    <p>When refunds apply, process, timelines, exclusions.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Prediction Disclaimer</h5>
                                    <p>Predictions are estimates, not guarantees. No liability for inaccurate predictions.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 19: Infrastructure -->
            <section id="infrastructure">
                <div class="section-header">
                    <div class="section-id">Section 19</div>
                    <h2>Infrastructure</h2>
                    <p class="section-desc">
                        Cloud architecture, deployment, and operational infrastructure.
                    </p>
                </div>

                <h3>19.1 Cloud Architecture</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Infrastructure Stack</span>
                        <span class="spec-block-id">INFRA-STACK</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Service</th>
                                    <th>Region</th>
                                    <th>Redundancy</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Compute (API)</td>
                                    <td>AWS ECS Fargate / Fly.io</td>
                                    <td>ap-southeast-1 (Singapore)</td>
                                    <td>Multi-AZ</td>
                                </tr>
                                <tr>
                                    <td>Database</td>
                                    <td>ScyllaDB Cloud / AWS RDS PostgreSQL</td>
                                    <td>ap-southeast-1</td>
                                    <td>Multi-AZ, read replicas</td>
                                </tr>
                                <tr>
                                    <td>Cache</td>
                                    <td>Redis (ElastiCache / Upstash)</td>
                                    <td>ap-southeast-1</td>
                                    <td>Cluster mode</td>
                                </tr>
                                <tr>
                                    <td>CDN</td>
                                    <td>Cloudflare</td>
                                    <td>Global</td>
                                    <td>Anycast</td>
                                </tr>
                                <tr>
                                    <td>Object Storage</td>
                                    <td>AWS S3</td>
                                    <td>ap-southeast-1</td>
                                    <td>Cross-region replication</td>
                                </tr>
                                <tr>
                                    <td>ML Inference</td>
                                    <td>AWS SageMaker / Modal</td>
                                    <td>ap-southeast-1</td>
                                    <td>Auto-scaling</td>
                                </tr>
                                <tr>
                                    <td>Message Queue</td>
                                    <td>AWS SQS / RabbitMQ</td>
                                    <td>ap-southeast-1</td>
                                    <td>Multi-AZ</td>
                                </tr>
                                <tr>
                                    <td>Email</td>
                                    <td>AWS SES / Resend</td>
                                    <td>ap-southeast-1</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td>Push Notifications</td>
                                    <td>Firebase Cloud Messaging</td>
                                    <td>Global</td>
                                    <td>N/A</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 20: Disaster Recovery -->
            <section id="disaster-recovery" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 20</div>
                    <h2>Disaster Recovery</h2>
                    <p class="section-desc">
                        Business continuity, backup strategy, and incident response.
                    </p>
                </div>

                <h3>20.1 Recovery Objectives</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">RTO/RPO Targets</span>
                        <span class="spec-block-id">DR-OBJ</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>System</th>
                                    <th>RTO (Recovery Time)</th>
                                    <th>RPO (Recovery Point)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>API Services</td>
                                    <td>&lt;15 minutes</td>
                                    <td>N/A (stateless)</td>
                                </tr>
                                <tr>
                                    <td>Database (Primary)</td>
                                    <td>&lt;30 minutes</td>
                                    <td>&lt;5 minutes</td>
                                </tr>
                                <tr>
                                    <td>Cache Layer</td>
                                    <td>&lt;5 minutes</td>
                                    <td>N/A (rebuildable)</td>
                                </tr>
                                <tr>
                                    <td>ML Models</td>
                                    <td>&lt;1 hour</td>
                                    <td>&lt;24 hours</td>
                                </tr>
                                <tr>
                                    <td>User Data</td>
                                    <td>&lt;30 minutes</td>
                                    <td>&lt;1 minute (transactions)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>20.2 Backup Strategy</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Backup Schedule</span>
                        <span class="spec-block-id">DR-BACKUP</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Frequency</th>
                                    <th>Retention</th>
                                    <th>Location</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Database (full)</td>
                                    <td>Daily</td>
                                    <td>30 days</td>
                                    <td>S3 + cross-region</td>
                                </tr>
                                <tr>
                                    <td>Database (incremental)</td>
                                    <td>Hourly</td>
                                    <td>7 days</td>
                                    <td>S3</td>
                                </tr>
                                <tr>
                                    <td>Transaction logs</td>
                                    <td>Continuous (WAL)</td>
                                    <td>7 days</td>
                                    <td>S3</td>
                                </tr>
                                <tr>
                                    <td>ML Models</td>
                                    <td>On each training</td>
                                    <td>Last 5 versions</td>
                                    <td>S3 + MLflow</td>
                                </tr>
                                <tr>
                                    <td>Configuration</td>
                                    <td>On change</td>
                                    <td>Indefinite</td>
                                    <td>Git + S3</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 21: Success Metrics & KPIs -->
            <section id="kpis">
                <div class="section-header">
                    <div class="section-id">Section 21</div>
                    <h2>Success Metrics & KPIs</h2>
                    <p class="section-desc">
                        How we measure success. Specific, measurable, time-bound targets.
                        No vague "improve user experience."
                    </p>
                </div>

                <h3>21.1 North Star Metrics</h3>
                <div class="grid-3">
                    <div class="value-card">
                        <div class="value-card-label">Primary North Star</div>
                        <div class="value-card-value">Savings Delivered</div>
                        <p style="color: var(--text-muted); font-size: 0.8rem; margin-top: 8px;">
                            Total USD saved by users vs. average market price
                        </p>
                    </div>
                    <div class="value-card">
                        <div class="value-card-label">Secondary North Star</div>
                        <div class="value-card-value">Prediction Accuracy</div>
                        <p style="color: var(--text-muted); font-size: 0.8rem; margin-top: 8px;">
                            % of predictions within Â±10% of actual price
                        </p>
                    </div>
                    <div class="value-card">
                        <div class="value-card-label">Tertiary North Star</div>
                        <div class="value-card-value">Directive Trust</div>
                        <p style="color: var(--text-muted); font-size: 0.8rem; margin-top: 8px;">
                            % of users who follow WAIT/BOOK directive
                        </p>
                    </div>
                </div>

                <h3>21.2 Target KPIs by Phase</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Year 1 Targets (Oracle Launch)</span>
                        <span class="spec-block-id">KPI-Y1</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Q1 Target</th>
                                    <th>Q2 Target</th>
                                    <th>Q3 Target</th>
                                    <th>Q4 Target</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Monthly Active Users (MAU)</td>
                                    <td>10,000</td>
                                    <td>50,000</td>
                                    <td>150,000</td>
                                    <td>500,000</td>
                                </tr>
                                <tr>
                                    <td>Prediction Accuracy</td>
                                    <td>75%</td>
                                    <td>80%</td>
                                    <td>85%</td>
                                    <td>87%</td>
                                </tr>
                                <tr>
                                    <td>Avg Savings per Booking</td>
                                    <td>$150</td>
                                    <td>$180</td>
                                    <td>$220</td>
                                    <td>$250</td>
                                </tr>
                                <tr>
                                    <td>Booking Conversion Rate</td>
                                    <td>2%</td>
                                    <td>3%</td>
                                    <td>4%</td>
                                    <td>5%</td>
                                </tr>
                                <tr>
                                    <td>Directive Follow Rate</td>
                                    <td>40%</td>
                                    <td>50%</td>
                                    <td>60%</td>
                                    <td>70%</td>
                                </tr>
                                <tr>
                                    <td>NPS Score</td>
                                    <td>+30</td>
                                    <td>+40</td>
                                    <td>+50</td>
                                    <td>+60</td>
                                </tr>
                                <tr>
                                    <td>7-Day Retention</td>
                                    <td>25%</td>
                                    <td>30%</td>
                                    <td>35%</td>
                                    <td>40%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>21.3 Performance SLAs</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">System Performance Targets</span>
                        <span class="spec-block-id">KPI-PERF</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>Target</th>
                                    <th>Critical Threshold</th>
                                    <th>Measurement</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>API Response Time (p50)</td>
                                    <td>&lt;200ms</td>
                                    <td>&lt;500ms</td>
                                    <td>New Relic / DataDog</td>
                                </tr>
                                <tr>
                                    <td>API Response Time (p99)</td>
                                    <td>&lt;500ms</td>
                                    <td>&lt;2000ms</td>
                                    <td>New Relic / DataDog</td>
                                </tr>
                                <tr>
                                    <td>Prediction Generation Time</td>
                                    <td>&lt;300ms</td>
                                    <td>&lt;1000ms</td>
                                    <td>Internal metrics</td>
                                </tr>
                                <tr>
                                    <td>Page Load Time (LCP)</td>
                                    <td>&lt;2.5s</td>
                                    <td>&lt;4s</td>
                                    <td>Core Web Vitals</td>
                                </tr>
                                <tr>
                                    <td>Time to Interactive</td>
                                    <td>&lt;3s</td>
                                    <td>&lt;5s</td>
                                    <td>Lighthouse</td>
                                </tr>
                                <tr>
                                    <td>Uptime</td>
                                    <td>99.9%</td>
                                    <td>99.5%</td>
                                    <td>Pingdom / UptimeRobot</td>
                                </tr>
                                <tr>
                                    <td>Error Rate</td>
                                    <td>&lt;0.1%</td>
                                    <td>&lt;1%</td>
                                    <td>Sentry / LogRocket</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section 22: Third-Party Dependencies -->
            <section id="dependencies">
                <div class="section-header">
                    <div class="section-id">Section 22</div>
                    <h2>Third-Party Dependencies</h2>
                    <p class="section-desc">
                        All external services, APIs, and libraries. Single point of truth for dependencies.
                    </p>
                </div>

                <h3>22.1 External Services</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Critical External Dependencies</span>
                        <span class="spec-block-id">DEP-EXT</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Service</th>
                                    <th>Purpose</th>
                                    <th>Criticality</th>
                                    <th>Fallback</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Stripe</td>
                                    <td>Payment processing</td>
                                    <td><span class="tag tag-critical">Critical</span></td>
                                    <td>None (core functionality)</td>
                                </tr>
                                <tr>
                                    <td>Amadeus GDS</td>
                                    <td>Flight inventory, booking</td>
                                    <td><span class="tag tag-critical">Critical</span></td>
                                    <td>Travelport, Sabre (multi-GDS)</td>
                                </tr>
                                <tr>
                                    <td>Firebase</td>
                                    <td>Push notifications</td>
                                    <td><span class="tag tag-important">High</span></td>
                                    <td>OneSignal</td>
                                </tr>
                                <tr>
                                    <td>AWS SES / Resend</td>
                                    <td>Transactional email</td>
                                    <td><span class="tag tag-important">High</span></td>
                                    <td>SendGrid, Mailgun</td>
                                </tr>
                                <tr>
                                    <td>Twilio</td>
                                    <td>SMS notifications</td>
                                    <td><span class="tag tag-optional">Medium</span></td>
                                    <td>AWS SNS</td>
                                </tr>
                                <tr>
                                    <td>Cloudflare</td>
                                    <td>CDN, DDoS protection</td>
                                    <td><span class="tag tag-important">High</span></td>
                                    <td>AWS CloudFront</td>
                                </tr>
                                <tr>
                                    <td>Segment</td>
                                    <td>Analytics routing</td>
                                    <td><span class="tag tag-optional">Medium</span></td>
                                    <td>Direct integrations</td>
                                </tr>
                                <tr>
                                    <td>Sentry</td>
                                    <td>Error tracking</td>
                                    <td><span class="tag tag-important">High</span></td>
                                    <td>Datadog, Bugsnag</td>
                                </tr>
                                <tr>
                                    <td>Auth0 / Clerk</td>
                                    <td>Authentication (optional)</td>
                                    <td><span class="tag tag-optional">Optional</span></td>
                                    <td>Custom auth (current plan)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>22.2 Data Providers</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Data Sources for ML/Predictions</span>
                        <span class="spec-block-id">DEP-DATA</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Provider</th>
                                    <th>Data Type</th>
                                    <th>Update Frequency</th>
                                    <th>Cost Model</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>OAG</td>
                                    <td>Flight schedules, routes</td>
                                    <td>Weekly</td>
                                    <td>Annual license</td>
                                </tr>
                                <tr>
                                    <td>Cirium</td>
                                    <td>Flight status, delays</td>
                                    <td>Real-time</td>
                                    <td>Per-request</td>
                                </tr>
                                <tr>
                                    <td>Historical Price APIs</td>
                                    <td>Historical fare data</td>
                                    <td>Daily</td>
                                    <td>Per-request or bulk</td>
                                </tr>
                                <tr>
                                    <td>Event APIs (Eventbrite, etc.)</td>
                                    <td>Events, conferences</td>
                                    <td>Daily</td>
                                    <td>Free tier / API</td>
                                </tr>
                                <tr>
                                    <td>Currency APIs (Wise, XE)</td>
                                    <td>Exchange rates</td>
                                    <td>Hourly</td>
                                    <td>Free tier / premium</td>
                                </tr>
                                <tr>
                                    <td>Fuel Price APIs</td>
                                    <td>Jet fuel prices</td>
                                    <td>Daily</td>
                                    <td>Free / premium</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>22.3 Core Libraries (Backend)</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Rust Dependencies</span>
                        <span class="spec-block-id">DEP-RUST</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-comment"># Cargo.toml - Core Dependencies</span>

[dependencies]
<span class="code-key">tokio</span> = { version = <span class="code-string">"1.35"</span>, features = [<span class="code-string">"full"</span>] }       <span class="code-comment"># Async runtime</span>
<span class="code-key">axum</span> = <span class="code-string">"0.7"</span>                                            <span class="code-comment"># Web framework</span>
<span class="code-key">sqlx</span> = { version = <span class="code-string">"0.7"</span>, features = [<span class="code-string">"postgres"</span>, <span class="code-string">"runtime-tokio"</span>] }
<span class="code-key">redis</span> = { version = <span class="code-string">"0.24"</span>, features = [<span class="code-string">"tokio-comp"</span>] }
<span class="code-key">serde</span> = { version = <span class="code-string">"1.0"</span>, features = [<span class="code-string">"derive"</span>] }
<span class="code-key">serde_json</span> = <span class="code-string">"1.0"</span>
<span class="code-key">jsonwebtoken</span> = <span class="code-string">"9.2"</span>                                     <span class="code-comment"># JWT handling</span>
<span class="code-key">argon2</span> = <span class="code-string">"0.5"</span>                                           <span class="code-comment"># Password hashing</span>
<span class="code-key">reqwest</span> = { version = <span class="code-string">"0.11"</span>, features = [<span class="code-string">"json"</span>] }      <span class="code-comment"># HTTP client</span>
<span class="code-key">tracing</span> = <span class="code-string">"0.1"</span>                                          <span class="code-comment"># Logging/tracing</span>
<span class="code-key">chrono</span> = { version = <span class="code-string">"0.4"</span>, features = [<span class="code-string">"serde"</span>] }
<span class="code-key">uuid</span> = { version = <span class="code-string">"1.6"</span>, features = [<span class="code-string">"v4"</span>, <span class="code-string">"serde"</span>] }
<span class="code-key">validator</span> = { version = <span class="code-string">"0.16"</span>, features = [<span class="code-string">"derive"</span>] }  <span class="code-comment"># Input validation</span>
<span class="code-key">thiserror</span> = <span class="code-string">"1.0"</span>                                        <span class="code-comment"># Error handling</span>
<span class="code-key">anyhow</span> = <span class="code-string">"1.0"</span>                                           <span class="code-comment"># Error handling</span>
                        </pre>
                    </div>
                </div>

                <h3>22.4 Core Libraries (Frontend)</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">JavaScript/TypeScript Dependencies</span>
                        <span class="spec-block-id">DEP-JS</span>
                    </div>
                    <div class="spec-block-body">
                        <pre>
<span class="code-comment">// package.json - Core Dependencies</span>

{
  <span class="code-key">"dependencies"</span>: {
    <span class="code-string">"next"</span>: <span class="code-string">"^14.0.0"</span>,              <span class="code-comment">// Framework</span>
    <span class="code-string">"react"</span>: <span class="code-string">"^18.2.0"</span>,
    <span class="code-string">"react-dom"</span>: <span class="code-string">"^18.2.0"</span>,
    <span class="code-string">"@tanstack/react-query"</span>: <span class="code-string">"^5.0.0"</span>,  <span class="code-comment">// Data fetching</span>
    <span class="code-string">"zustand"</span>: <span class="code-string">"^4.4.0"</span>,           <span class="code-comment">// State management</span>
    <span class="code-string">"zod"</span>: <span class="code-string">"^3.22.0"</span>,              <span class="code-comment">// Validation</span>
    <span class="code-string">"date-fns"</span>: <span class="code-string">"^2.30.0"</span>,        <span class="code-comment">// Date handling</span>
    <span class="code-string">"@stripe/stripe-js"</span>: <span class="code-string">"^2.2.0"</span>,
    <span class="code-string">"@stripe/react-stripe-js"</span>: <span class="code-string">"^2.4.0"</span>,
    <span class="code-string">"framer-motion"</span>: <span class="code-string">"^10.16.0"</span>,  <span class="code-comment">// Animations</span>
    <span class="code-string">"recharts"</span>: <span class="code-string">"^2.10.0"</span>,        <span class="code-comment">// Charts</span>
    <span class="code-string">"@segment/analytics-next"</span>: <span class="code-string">"^1.55.0"</span>
  }
}
                        </pre>
                    </div>
                </div>
            </section>

            <!-- Section 23: Rollout Strategy -->
            <section id="rollout" style="background: var(--bg-secondary);">
                <div class="section-header">
                    <div class="section-id">Section 23</div>
                    <h2>Rollout Strategy</h2>
                    <p class="section-desc">
                        Phased launch plan, feature flags, and go-live criteria.
                    </p>
                </div>

                <h3>23.1 Launch Phases</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Phased Rollout Plan</span>
                        <span class="spec-block-id">ROLL-PHASE</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Phase</th>
                                    <th>Audience</th>
                                    <th>Features</th>
                                    <th>Duration</th>
                                    <th>Success Criteria</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Alpha</strong></td>
                                    <td>Internal team (50 users)</td>
                                    <td>Core prediction, basic booking</td>
                                    <td>4 weeks</td>
                                    <td>No critical bugs, &gt;70% prediction accuracy</td>
                                </tr>
                                <tr>
                                    <td><strong>Closed Beta</strong></td>
                                    <td>Invited users (500)</td>
                                    <td>+ Alerts, + Price history</td>
                                    <td>6 weeks</td>
                                    <td>NPS &gt;40, &lt;1% error rate</td>
                                </tr>
                                <tr>
                                    <td><strong>Open Beta</strong></td>
                                    <td>Waitlist (5,000)</td>
                                    <td>+ Demand pools (limited routes)</td>
                                    <td>8 weeks</td>
                                    <td>85% prediction accuracy, 3% conversion</td>
                                </tr>
                                <tr>
                                    <td><strong>Soft Launch</strong></td>
                                    <td>Malaysia only (unlimited)</td>
                                    <td>All MVP features</td>
                                    <td>8 weeks</td>
                                    <td>Positive unit economics, stable infra</td>
                                </tr>
                                <tr>
                                    <td><strong>Full Launch</strong></td>
                                    <td>SEA region</td>
                                    <td>All features + Premium tier</td>
                                    <td>Ongoing</td>
                                    <td>Growth targets per KPIs</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>23.2 Feature Flags</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Feature Flag Configuration</span>
                        <span class="spec-block-id">ROLL-FLAGS</span>
                    </div>
                    <div class="spec-block-body">
                        <table>
                            <thead>
                                <tr>
                                    <th>Flag Name</th>
                                    <th>Default</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>enable_predictions</code></td>
                                    <td>true</td>
                                    <td>Show Oracle predictions</td>
                                </tr>
                                <tr>
                                    <td><code>enable_demand_pools</code></td>
                                    <td>false</td>
                                    <td>Allow joining demand pools</td>
                                </tr>
                                <tr>
                                    <td><code>enable_booking</code></td>
                                    <td>true</td>
                                    <td>Enable flight booking</td>
                                </tr>
                                <tr>
                                    <td><code>enable_premium</code></td>
                                    <td>false</td>
                                    <td>Show premium subscription option</td>
                                </tr>
                                <tr>
                                    <td><code>enable_ata</code></td>
                                    <td>false</td>
                                    <td>Autonomous Travel Agent feature</td>
                                </tr>
                                <tr>
                                    <td><code>enable_error_fare_alerts</code></td>
                                    <td>true</td>
                                    <td>Send error fare notifications</td>
                                </tr>
                                <tr>
                                    <td><code>prediction_confidence_threshold</code></td>
                                    <td>40</td>
                                    <td>Minimum confidence to show prediction</td>
                                </tr>
                                <tr>
                                    <td><code>max_alerts_free_user</code></td>
                                    <td>5</td>
                                    <td>Alert limit for free users</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <h3>23.3 Go-Live Checklist</h3>
                <div class="spec-block">
                    <div class="spec-block-header">
                        <span class="spec-block-title">Pre-Launch Requirements</span>
                        <span class="spec-block-id">ROLL-GOLIVE</span>
                    </div>
                    <div class="spec-block-body">
                        <ul class="checklist">
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>All Critical E2E Tests Pass</h5>
                                    <p>100% pass rate on critical user journeys.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Performance SLAs Met</h5>
                                    <p>API p99 &lt;500ms, LCP &lt;2.5s under load test.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Security Audit Complete</h5>
                                    <p>No critical/high vulnerabilities open.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Legal Documents Live</h5>
                                    <p>ToS, Privacy Policy, Cookie Policy published.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Monitoring & Alerting Active</h5>
                                    <p>All dashboards configured, on-call rotation set.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Rollback Plan Tested</h5>
                                    <p>Can rollback to previous version in &lt;15 minutes.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Support Processes Ready</h5>
                                    <p>Support email monitored, FAQ published, escalation path defined.</p>
                                </div>
                            </li>
                            <li>
                                <span class="checklist-icon required">!</span>
                                <div class="checklist-content">
                                    <h5>Analytics Validated</h5>
                                    <p>All core events firing correctly to Segment â†’ Amplitude.</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Section 24: Handoff Checklist -->
            <section id="handoff">
                <div class="section-header">
                    <div class="section-id">Section 24</div>
                    <h2>Handoff Checklist</h2>
                    <p class="section-desc">
                        Before any work begins, these items must be verified complete.
                        Missing items = blocked development.
                    </p>
                </div>

                <div class="alert alert-danger">
                    <h5>â›” DO NOT PROCEED WITHOUT THESE</h5>
                    <p>If ANY of these are incomplete, development will fail. 
                    Stop. Get answers. Then proceed.</p>
                </div>

                <h3>24.1 Design Handoff</h3>
                <ul class="checklist">
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Design Tokens Implemented</h5>
                            <p>All colors, typography, spacing, shadows from Section 2 are in code as CSS variables or theme constants.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Component Library Complete</h5>
                            <p>All components from Component Specification document exist as reusable code components.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>All States Designed</h5>
                            <p>Every component has: default, hover, active, focus, disabled, loading, error, empty states.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Responsive Behavior Defined</h5>
                            <p>Each of the 3 UI variants (mobile/tablet/desktop) has complete designs, not just "make it fit."</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Animation Specs Complete</h5>
                            <p>All animations have exact timing, easing, and trigger conditions documented.</p>
                        </div>
                    </li>
                </ul>

                <h3>24.2 Backend Handoff</h3>
                <ul class="checklist">
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Database Schema Migrated</h5>
                            <p>All tables from Section 3 exist in development database with proper indexes.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>API Endpoints Implemented</h5>
                            <p>All endpoints from Section 4 return correct response shapes (can use mock data initially).</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Error Responses Consistent</h5>
                            <p>All errors follow standard error response format from API-ERROR spec.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Authentication Working</h5>
                            <p>Login, logout, token refresh, and protected route middleware functional.</p>
                        </div>
                    </li>
                </ul>

                <h3>24.3 ML/Data Handoff</h3>
                <ul class="checklist">
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Training Data Available</h5>
                            <p>Minimum 1 year of historical price data for top 100 routes accessible.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Model Serving Infrastructure</h5>
                            <p>Can deploy and serve ML model with &lt;300ms inference time.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Baseline Model Trained</h5>
                            <p>Initial model achieving &gt;70% accuracy on validation set.</p>
                        </div>
                    </li>
                </ul>

                <h3>24.4 Infrastructure Handoff</h3>
                <ul class="checklist">
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Environments Provisioned</h5>
                            <p>Development, staging, and production environments exist and are isolated.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>CI/CD Pipeline Working</h5>
                            <p>Code push â†’ automated tests â†’ deploy to staging works end-to-end.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Monitoring & Alerting</h5>
                            <p>Error tracking (Sentry), performance monitoring (New Relic/DataDog), uptime monitoring active.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Secrets Management</h5>
                            <p>API keys, database credentials stored securely (Vault, AWS Secrets Manager, etc.).</p>
                        </div>
                    </li>
                </ul>

                <h3>24.5 Legal/Compliance Handoff</h3>
                <ul class="checklist">
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Terms of Service Finalized</h5>
                            <p>Lawyer-reviewed ToS covering booking terms, liability limits, refund policies.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Privacy Policy Compliant</h5>
                            <p>GDPR/PDPA compliant privacy policy covering data collection, usage, retention.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Cookie Consent Mechanism</h5>
                            <p>Cookie banner with granular consent options implemented.</p>
                        </div>
                    </li>
                    <li>
                        <span class="checklist-icon required">!</span>
                        <div class="checklist-content">
                            <h5>Data Processing Agreements</h5>
                            <p>DPAs signed with all third-party data processors (analytics, payment, etc.).</p>
                        </div>
                    </li>
                </ul>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p><strong>VAYA Master Specification v1.0.0</strong></p>
            <p>Document Classification: CONFIDENTIAL â€” Internal Use Only</p>
            <p>Generated: January 8, 2026 | Valid Until: Next Major Version</p>
            <p style="margin-top: 20px; color: var(--danger);">
                âš ï¸ Any gaps or ambiguities in this document must be reported immediately. 
                Do not proceed with assumptions.
            </p>
        </div>
    </footer>
</body>
</html>
